webpackJsonp([0],{"+JS6":function(e,t){},DlMc:function(e,t,s){var i=s("gApy"),a=s("DtRx"),n=a;n.v1=i,n.v4=a,e.exports=n},DtRx:function(e,t,s){var i=s("i4uy"),a=s("MAlW");e.exports=function(e,t,s){var n=t&&s||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var r=0;r<16;++r)t[n+r]=o[r];return t||a(o)}},JNXG:function(e,t,s){"use strict";var i=s("DlMc"),a=s.n(i),n={props:["num"],data:function(){return{data:{callback:"",policy:"",signature:"",key:"",ossaccessKeyId:"",dir:"",host:"http://ylmanager.oss-cn-shanghai.aliyuncs.com",success_action_status:"200"},defaultList:[],imgName:"",visible:!1,uploadList:[],index:1,dir:""}},methods:{handleView:function(e){this.imgName=e,this.visible=!0},handleRemove:function(e){var t=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(t.indexOf(e),1)},handleRemove1:function(e){this.$refs.upload.fileList;this.$refs.upload.fileList.splice(0,this.uploadList.length)},handleSuccess:function(e,t){console.log(t),t.filename=t.response.msg},handleFormatError:function(e){this.$Notice.warning({title:"The file format is incorrect",desc:"File format of "+e.name+" is incorrect, please select jpg or png."})},handleMaxSize:function(e){this.$Notice.warning({title:"Exceeding file size limit",desc:"图片大小不能超过1MB"})},handleBeforeUpload:function(){this.data.key=this.dir+"/"+a.a.v4();var e=this.num?this.num:1,t=this.uploadList.length<e;return t||this.$Notice.warning({title:"最多只能上传"+e+"张图片"}),t},upload:function(){var e=this;setTimeout(function(){e.uploadList=e.$refs.upload.fileList},800)},key:function(){return this.policyData.dir+"/"+a.a.v4()},policy:function(){var e=this;e.Axios.get("/aliyun/oss/policy").then(function(t){e.dir=t.data.data.dir,e.data.callback=t.data.data.callback,e.data.policy=t.data.data.policy,e.data.signature=t.data.data.signature,e.data.key=t.data.data.dir+"/"+a.a.v4(),e.data.ossaccessKeyId=t.data.data.accessKeyId,e.data.dir=t.data.data.dir,console.log(e.data)})}},mounted:function(){this.uploadList=this.$refs.upload.fileList,this.upload();var e=this;setInterval(function(){e.policy()},18e4)}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._l(e.uploadList,function(t,i){return s("div",{staticClass:"demo-upload-list-box"},[s("div",{staticClass:"demo-upload-list"},["finished"===t.status?[s("img",{attrs:{src:t.filename+"?x-oss-process=image/resize,m_pad,h_100,w_100,color_FFFFFF"}}),e._v(" "),s("div",{staticClass:"demo-upload-list-cover"},[s("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(s){e.handleView(t.filename)}}}),e._v(" "),s("Icon",{directives:[{name:"show",rawName:"v-show",value:!e.$route.query.examineId,expression:"!$route.query.examineId"}],attrs:{type:"ios-trash-outline"},nativeOn:{click:function(s){e.handleRemove(t)}}})],1)]:[t.showProgress?s("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2),e._v(" "),s("br"),e._v(" "),s("span",{staticClass:"demo-upload-list-box-index"},[e._v(e._s(i+1))])])}),e._v(" "),s("Upload",{directives:[{name:"show",rawName:"v-show",value:!e.$route.query.examineId,expression:"!$route.query.examineId"}],ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"default-file-list":e.defaultList,"on-success":e.handleSuccess,format:["jpg","jpeg","png"],"max-size":1024,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,multiple:!0,data:e.data,type:"drag",action:"http://oms.e6best.com/UploadFile.aspx"}},[s("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[s("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),e._v(" "),s("Modal",{attrs:{title:"View Image",width:"300"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?s("img",{staticStyle:{width:"100%"},attrs:{src:e.imgName}}):e._e(),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary",size:"large"},on:{click:function(t){e.visible=!e.visible}}},[e._v("确定")])],1)])],2)},staticRenderFns:[]};var r=s("VU/8")(n,o,!1,function(e){s("+JS6")},null,null);t.a=r.exports},MAlW:function(e,t){for(var s=[],i=0;i<256;++i)s[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,a=s;return[a[e[i++]],a[e[i++]],a[e[i++]],a[e[i++]],"-",a[e[i++]],a[e[i++]],"-",a[e[i++]],a[e[i++]],"-",a[e[i++]],a[e[i++]],"-",a[e[i++]],a[e[i++]],a[e[i++]],a[e[i++]],a[e[i++]],a[e[i++]]].join("")}},gApy:function(e,t,s){var i,a,n=s("i4uy"),o=s("MAlW"),r=0,l=0;e.exports=function(e,t,s){var c=t&&s||0,d=t||[],u=(e=e||{}).node||i,p=void 0!==e.clockseq?e.clockseq:a;if(null==u||null==p){var m=n();null==u&&(u=i=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==p&&(p=a=16383&(m[6]<<8|m[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:l+1,v=f-r+(h-l)/1e4;if(v<0&&void 0===e.clockseq&&(p=p+1&16383),(v<0||f>r)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");r=f,l=h,a=p;var y=(1e4*(268435455&(f+=122192928e5))+h)%4294967296;d[c++]=y>>>24&255,d[c++]=y>>>16&255,d[c++]=y>>>8&255,d[c++]=255&y;var x=f/4294967296*1e4&268435455;d[c++]=x>>>8&255,d[c++]=255&x,d[c++]=x>>>24&15|16,d[c++]=x>>>16&255,d[c++]=p>>>8|128,d[c++]=255&p;for(var g=0;g<6;++g)d[c+g]=u[g];return t||o(d)}},i4uy:function(e,t){var s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(s){var i=new Uint8Array(16);e.exports=function(){return s(i),i}}else{var a=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}},lDlD:function(e,t,s){"use strict";var i={data:function(){return{model:!1,formDynamic:{items:[{Express:"",ExpressNo:""}],idstr:"",Express:[],ExpressNo:[],Description:""},ruleValidate:{Description:[{required:!0,message:"The name cannot be empty",trigger:"blur"}]},cityList3:[]}},methods:{getRole:function(){var e=this;e.Axios.get("/Manage/Order/getExpressList").then(function(t){e.cityList3=t.data.data})},validatePass:function(e,t,s){var i=this.formDynamic.items[e.index];i.Express&&i.ExpressNo?s():s(new Error("物流信息("+(e.index+1)+")不能为空"))},handleSubmit:function(e){var t=this,s=this;for(var i in this.formDynamic.Express=[],this.formDynamic.ExpressNo=[],s.formDynamic.items)this.formDynamic.Express.push(s.formDynamic.items[i].Express),this.formDynamic.ExpressNo.push(s.formDynamic.items[i].ExpressNo);this.$refs[e].validate(function(e){e?s.Axios.post("/Manage/Order/updateOrder",s.Qs.stringify({idstr:s.formDynamic.idstr,statusid:2,Express:s.formDynamic.Express.join("，"),ExpressNo:s.formDynamic.ExpressNo.join("，"),Description:s.formDynamic.Description})).then(function(e){0===e.data.error?(s.$Message.success("发货成功"),s.$emit("getOrder"),s.$emit("statusNum"),s.model=!1):s.$Message.error(e.data.errorMsg)}):t.$Message.error("请填写物流信息！")})},handleAdd:function(){this.formDynamic.items.push({Express:"",ExpressNo:""})},handleRemove:function(e){this.formDynamic.items.length>1?this.formDynamic.items.splice(e,1):this.$Message.warning("至少填写一个物流信息！")}},mounted:function(){this.getRole()}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{attrs:{width:"360"},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[s("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[s("Icon",{attrs:{type:"ios-information-circle"}}),e._v(" "),s("span",[e._v("请填写发货信息")])],1),e._v(" "),s("Form",{ref:"formDynamic",staticStyle:{width:"300px"},attrs:{model:e.formDynamic,"label-width":84}},[e._l(e.formDynamic.items,function(t,i){return s("FormItem",{key:i,attrs:{label:"快递信息("+(i+1)+")",prop:"items."+i+".Express",rules:{validator:e.validatePass,required:!0,index:i,trigger:"change"}}},[s("Row",[s("Col",{attrs:{span:"18"}},[s("Select",{attrs:{placeholder:"请输入快递公司"},model:{value:t.Express,callback:function(s){e.$set(t,"Express",s)},expression:"item.Express"}},e._l(e.cityList3,function(t,i){return s("Option",{key:i,attrs:{value:t.Name}},[e._v(e._s(t.Name))])})),e._v(" "),s("Input",{attrs:{maxlength:20,type:"text",placeholder:"请输入物流单号"},model:{value:t.ExpressNo,callback:function(s){e.$set(t,"ExpressNo",s)},expression:"item.ExpressNo"}})],1),e._v(" "),s("Col",{attrs:{span:"4",offset:"1"}},[s("Button",{attrs:{size:"small"},on:{click:function(t){e.handleRemove(i)}}},[e._v("删除")])],1)],1)],1)}),e._v(" "),s("FormItem",[s("Row",[s("Col",{attrs:{span:"12"}},[s("Button",{attrs:{type:"dashed",long:"",icon:"md-add"},on:{click:e.handleAdd}},[e._v("添加快递")])],1)],1)],1),e._v(" "),s("FormItem",{attrs:{label:"备注信息",prop:"Description"}},[s("Input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:e.formDynamic.Description,callback:function(t){e.$set(e.formDynamic,"Description",t)},expression:"formDynamic.Description"}})],1)],2),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formDynamic")}}},[e._v(e._s(e.$route.query.idstr?"修改":"发货"))])],1)],1)},staticRenderFns:[]},n=s("VU/8")(i,a,!1,null,null,null);t.a=n.exports},lobQ:function(e,t,s){"use strict";var i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("Upload",{attrs:{action:"/Upload/SupplierAdmin/UploadExpressLog.aspx",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",format:["xls","xlsx"],"show-upload-list":!1,"on-success":this.uploadsuccess}},[t("Button",{attrs:{type:"text",icon:"ios-cloud-upload-outline"}},[this._v("批量发货")])],1)},staticRenderFns:[]},a=s("VU/8")({methods:{uploadsuccess:function(e,t,s){""!==e.msg?this.$Message.success("文件上传成功！"):this.$Message.error("文件上传失败")}}},i,!1,null,null,null);t.a=a.exports},mvHQ:function(e,t,s){e.exports={default:s("qkKv"),__esModule:!0}},qkKv:function(e,t,s){var i=s("FeBl"),a=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}}});