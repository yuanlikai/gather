webpackJsonp([26],{"+B7U":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={components:{upImg:a("JNXG").a},data:function(){return{current:0,detail:{},formValidate:{id:"",sortsNum:"",parentId:this.$route.query.name,name:"",description:""},ruleValidate:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},methods:{handleSubmit:function(e){var t=this;t.$refs[e].validate(function(e){e?t.Axios.post("/Manage/Category/saveCategory",t.Qs.stringify({id:t.formValidate.id,sortsNum:t.formValidate.sortsNum,parentId:t.$route.query.parentId?t.$route.query.parentId:"",imgUrl:t.$refs.classify.uploadList.length>0?t.$refs.classify.uploadList[0].filename:"",name:t.formValidate.name,description:t.formValidate.description})).then(function(e){0===e.data.code?(t.$Message.success("添加成功！"),t.handleReset("formValidate"),t.$refs.classify.uploadList=[],t.current=1):t.$Message.warning(e.data.message)}):t.$Message.error("有必填项未填写!")})},handleReset:function(e){this.$refs[e].resetFields()},getDetail:function(){var e=this,t=this;t.Axios.get("/Manage/Category/detail",{params:{id:t.$route.query.id}}).then(function(a){t.formValidate={id:a.data.data.id,sortsNum:a.data.data.sortsNum,parentId:e.$route.query.name,name:a.data.data.name,description:a.data.data.description},a.data.data.imgUrl&&t.$refs.classify.defaultList.push({filename:a.data.data.imgUrl})})}},mounted:function(){this.$route.query.id&&this.getDetail()}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("Card",{staticStyle:{border:"none",margin:"16px 0"}},[a("div",{staticClass:"ivu-page-header-title"},[e._v(e._s(e.$route.query.id?"编辑":"添加")+"分类")])]),e._v(" "),a("Card",{style:{margin:"16px 20px",background:"#fff",height:"auto"}},[a("Row",{directives:[{name:"show",rawName:"v-show",value:0===e.current,expression:"current===0"}]},[a("Col",{attrs:{md:{span:18,offset:3},lg:{span:10,offset:6}}},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":70}},[a("FormItem",{attrs:{label:"分类名称",prop:"name"}},[a("Input",{attrs:{maxlength:50,placeholder:"请输入"},model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}})],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.$route.query.name,expression:"$route.query.name"}],attrs:{label:"上级分类",prop:"parentId"}},[a("Input",{attrs:{disabled:"disabled",placeholder:"请输入"},model:{value:e.formValidate.parentId,callback:function(t){e.$set(e.formValidate,"parentId",t)},expression:"formValidate.parentId"}})],1),e._v(" "),a("FormItem",{attrs:{label:"排序",prop:"sortsNum"}},[a("Input",{attrs:{maxlength:3,placeholder:"请输入"},on:{"on-keyup":function(t){e.formValidate.sortsNum=e.formValidate.sortsNum.replace(/[^\d]/g,"")}},model:{value:e.formValidate.sortsNum,callback:function(t){e.$set(e.formValidate,"sortsNum",t)},expression:"formValidate.sortsNum"}})],1),e._v(" "),a("FormItem",{attrs:{label:"分类图标",prop:"sortsNum"}},[a("upImg",{ref:"classify"})],1),e._v(" "),a("FormItem",{attrs:{label:"分类描述",prop:"description"}},[a("Input",{attrs:{maxlength:30,type:"textarea",placeholder:"请输入"},model:{value:e.formValidate.description,callback:function(t){e.$set(e.formValidate,"description",t)},expression:"formValidate.description"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"description"}},[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("提交")])],1)],1)],1)],1),e._v(" "),a("Row",{directives:[{name:"show",rawName:"v-show",value:1===e.current,expression:"current===1"}]},[a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"24"}},[a("Icon",{staticStyle:{margin:"32px 0 24px 0"},attrs:{type:"ios-checkmark-circle",size:"90",color:"#19be6b"}}),e._v(" "),a("div",{staticClass:"ivu-result-title"},[e._v(e._s(e.$route.query.id?"修改":"添加")+"成功")]),e._v(" "),a("Alert",{staticStyle:{width:"50%",margin:"0 auto 32px auto","font-size":"14px","text-align":"left",padding:"16px"}},[e._v("\n          分类"+e._s(e.$route.query.id?"修改":"添加")+"成功，请到分类列表查看\n        ")]),e._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:!e.$route.query.id,expression:"!$route.query.id"}],attrs:{type:"primary"},on:{click:function(t){e.current=0}}},[e._v("继续添加")]),e._v(" \n      ")],1)],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(r,s,!1,function(e){a("Y1JQ")},"data-v-30b785ec",null);t.default=i.exports},Y1JQ:function(e,t){}});