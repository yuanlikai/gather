webpackJsonp([4],{"/KQw":function(e,t,s){e.exports=s.p+"static/img/logo-wat.7fab305.png"},Cl3J:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{modal:!1,user:localStorage.getItem("user"),isMenu:!1,tab:"",menuList:[],menuLeft:[],supplier:{},menu:localStorage.getItem("menu"),menu1:localStorage.getItem("menu1"),isCollapsed:!1,formValidate:{oldPassword:"",newPassword:""},ruleValidate:{oldPassword:[{required:!0,message:"请输入",trigger:"blur"}],newPassword:[{required:!0,message:"请输入",trigger:"blur"}]}}},computed:{rotateIcon:function(){return["menu-icon",this.isCollapsed?"rotate-icon":""]},menuitemClasses:function(){return["menu-item",this.isCollapsed?"collapsed-menu":""]}},methods:{handleSubmit:function(e){var t=this,s=this;this.$refs[e].validate(function(e){e?s.Axios.post("/Manage/UserInfo/updatePassword",s.Qs.stringify({oldPassword:s.formValidate.oldPassword,newPassword:s.formValidate.newPassword})).then(function(e){0===e.data.code?(s.$router.push("/"),t.$Message.success("修改密码成功，请重新登录！")):t.$Message.warning(e.data.message),console.log(e.data)}):t.$Message.error("有必填项未填写!")})},selectMenu:function(e){this.menu=e,localStorage.setItem("menu",e)},selectMenu1:function(e){for(var t=this.menuList,s=0;s<t.length;s++)e===t[s].numb&&(this.menuLeft=this.menuList[s],localStorage.setItem("menu",this.menuLeft.children[0].children[0].numb));this.menu1=e,localStorage.setItem("menu1",e)},collapsedSider:function(){this.$refs.side1.toggleCollapse()},tagAffair:function(e){this.$store.commit("increment",e)},out:function(e){var t=this;"1"===e?t.modal=!0:"2"===e&&t.Axios.post("/logout").then(function(){}).catch(function(e){localStorage.removeItem("menu"),localStorage.removeItem("menu1"),localStorage.removeItem("menuList"),t.$router.push("/")})},getCurrentUser:function(){var e=this;e.Axios.get("/Manage/UserInfo/getCurrentUser").then(function(t){e.supplier=t.data.data})},operateMuen:function(e,t){this.menu1=e,localStorage.setItem("menu1",e),this.menu=t,localStorage.setItem("menu",t),"1-1-2"===t&&this.$router.push("/home")}},mounted:function(){var e=this;this.menuList=JSON.parse(localStorage.getItem("menuList")),this.isMenu=!0,this.getCurrentUser(),this.$router.afterEach(function(t){e.$Loading.finish()})}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout"},[a("Layout",{},[a("Sider",{ref:"side1",staticClass:"Sider2",staticStyle:{"overflow-x":"auto",height:"100vh"},attrs:{breakpoint:"xs","hide-trigger":"",collapsible:"","collapsed-width":0,width:256},model:{value:e.isCollapsed,callback:function(t){e.isCollapsed=t},expression:"isCollapsed"}},[e.isMenu?a("Menu",{attrs:{theme:"dark","active-name":e.menu,width:"256px"},on:{"on-select":e.selectMenu}},[a("div",{staticClass:"i-layout-sider-logo i-layout-sider-logo-dark"},[a("a",{staticClass:"i-link i-link-color",on:{click:function(t){e.operateMuen("1","1-1-2")}}},[a("img",{attrs:{src:s("/KQw")}})])]),e._v(" "),e._l(e.menuList,function(t,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.numb===e.menu1,expression:"item.numb===menu1"}],key:s},e._l(t.children,function(t,s){return a("MenuGroup",{key:s,attrs:{title:t.name}},e._l(t.children,function(t,s){return a("MenuItem",{key:s,attrs:{to:t.to,name:t.numb}},[a("Icon",{attrs:{type:"ios-analytics"}}),e._v("\n              "+e._s(t.name)+"\n            ")],1)}))}))})],2):e._e()],1),e._v(" "),a("Layout",{class:e.isCollapsed?"menucls":"menucla"},[a("Header",{staticClass:"layout-header-bar",style:{padding:10}},[a("Icon",{class:e.rotateIcon,style:{margin:"0 24px","line-height":"64px",cursor:"pointer",float:"left"},attrs:{type:"md-menu",size:"24"},nativeOn:{click:function(t){return e.collapsedSider(t)}}}),e._v(" "),e.isMenu?a("Menu",{staticStyle:{float:"left"},attrs:{mode:"horizontal","active-name":e.menu1},on:{"on-select":e.selectMenu1}},e._l(e.menuList,function(t,s){return a("MenuItem",{key:s,attrs:{name:t.numb}},[e._v("\n            "+e._s(t.name)+"\n          ")])})):e._e(),e._v(" "),a("Menu",{staticStyle:{float:"right","margin-right":"20px"},attrs:{mode:"horizontal",type:"light"}},[a("div",{staticClass:"layout-logo"}),e._v(" "),a("div",{staticClass:"layout-nav"},[a("span",{staticStyle:{"font-size":"12px","font-weight":"600",color:"#333"}},[e._v(e._s(e.supplier.supplierName))]),e._v(" "),a("router-link",{directives:[{name:"show",rawName:"v-show",value:"SUPER"===e.supplier.userType,expression:"supplier.userType==='SUPER'"}],attrs:{to:"/log"}},[a("Tooltip",{attrs:{content:"日志",placement:"bottom"}},[a("Icon",{staticStyle:{"margin-left":"20px"},attrs:{size:"18",color:"#555555",type:"md-ionic"}})],1)],1),e._v(" "),a("Dropdown",{staticStyle:{"margin-left":"20px",cursor:"pointer"},attrs:{trigger:"click"},on:{"on-click":e.out}},[a("Avatar",{staticStyle:{"margin-right":"8px"},attrs:{src:"https://ylcgenterprise.oss-cn-shanghai.aliyuncs.com/touxiang.jpg"}}),e._v("\n              "+e._s(e.user)+"\n              "),a("Icon",{attrs:{type:"ios-arrow-down"}}),e._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"1"}},[e._v("修改密码")]),e._v(" "),a("DropdownItem",{attrs:{name:"2"}},[e._v("退出登录")])],1)],1)],1)])],1),e._v(" "),a("router-view",{attrs:{supplier:e.supplier},on:{operateMuen:e.operateMuen}})],1)],1),e._v(" "),e.isCollapsed?e._e():a("div",{staticClass:"zz-fixed",on:{click:e.collapsedSider}}),e._v(" "),a("Modal",{attrs:{width:"360"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),e._v(" "),a("span",[e._v("修改密码")])],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"原密码",prop:"oldPassword"}},[a("Input",{attrs:{maxlength:25,type:"password",placeholder:"请输入"},model:{value:e.formValidate.oldPassword,callback:function(t){e.$set(e.formValidate,"oldPassword",t)},expression:"formValidate.oldPassword"}})],1),e._v(" "),a("FormItem",{attrs:{label:"新密码",prop:"newPassword"}},[a("Input",{attrs:{maxlength:25,type:"password",placeholder:"请输入"},model:{value:e.formValidate.newPassword,callback:function(t){e.$set(e.formValidate,"newPassword",t)},expression:"formValidate.newPassword"}})],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",size:"large",long:""},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("确定")])],1)])],1)},staticRenderFns:[]};var n=s("VU/8")(a,o,!1,function(e){s("JnQq"),s("g1zu")},null,null);t.default=n.exports},JnQq:function(e,t){},g1zu:function(e,t){}});
//# sourceMappingURL=4.640ac4c7d6ea40b88a51.js.map