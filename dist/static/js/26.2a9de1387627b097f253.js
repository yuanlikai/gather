webpackJsonp([26],{QE5r:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o={data:function(){var t=this;return{modal:!1,modal1:!1,loading1:!0,formValidate1:{name:"",id:"",approvalStatus:"PASS",rejectReason:""},formValidate:{state:"AUDITING",skuInfoNameLike:"",skuInfoNoLike:"",classify:[],brandId:"",supplierId:""},columns1:[{title:"审核时间",key:"timeCreated",render:function(a,e){return a("span",t.riqi(e.row.timeCreated))}},{title:"审核人员",key:"approverName"},{title:"审核结果",key:"approvalStatus",render:function(t,a){return t("span",a.row.approvalStatus.name)}},{title:"反馈详情",key:"feedback"}],data1:[],columns:[{type:"index",width:60,align:"center"},{title:"商品图片",tooltip:!0,width:120,align:"center",key:"skuInfoPicUrl",render:function(t,a){return t("Poptip",{props:{trigger:"hover",placement:"right"}},[t("img",{style:{cursor:"pointer",height:"30px"},attrs:{src:a.row.skuInfoPicUrl}}),t("div",{attrs:{class:"api"},slot:"content"},[t("img",{style:{height:"200px"},attrs:{src:a.row.skuInfoPicUrl}})])])}},{title:"商品名称",tooltip:!0,key:"skuInfoName",render:function(a,e){return a("div",[a("a",{style:{float:"left",width:"100%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},on:{click:function(){var a=t.$router.resolve({path:"/examine",query:{examineId:e.row.id}});window.open(a.href,"_blank")}}},e.row.skuInfoName),a("div",{style:{color:"#888888"}},"品牌："+(e.row.brandName?e.row.brandName:"未绑定"))])}},{title:"编号",tooltip:!0,key:"skuInfoNo",align:"center"},{title:"商品分类",align:"center",render:function(t,a){return t("p",a.row.category1Name+" > "+a.row.category2Name+" > "+a.row.category3Name)}},{title:"供应商",tooltip:!0,key:"supplierName",align:"center"},{title:"状态",tooltip:!0,align:"center",render:function(a,e){return"AUDITING"===e.row.approvalStatus?a("span","待审核"):"PASS"===e.row.approvalStatus?a("div",[a("div","已通过"),a("a",{on:{click:function(){t.ExamineLog(e.row.id)}}},"审核详情")]):"REJECT"===e.row.approvalStatus?a("div",[a("div","未通过"),a("a",{on:{click:function(){t.ExamineLog(e.row.id)}}},"审核详情")]):void 0},filters:[{label:"待审核",value:"AUDITING"},{label:"已通过",value:"PASS"},{label:"未通过",value:"REJECT"}],filterMultiple:!1,filterRemote:function(t){this.$parent.resetPage(),this.$parent.formValidate.state=t.length>0?t[0]:"all",this.$parent.getList()}},{title:"操作",tooltip:!0,key:"ProductName",width:100,align:"center",render:function(a,e){return"AUDITING"===e.row.approvalStatus?[a("a",{on:{click:function(){t.formValidate1.id=e.row.id,t.formValidate1.rejectReason="",t.formValidate1.approvalStatus="PASS",t.formValidate1.name=e.row.skuInfoName,t.modal=!0}}},"审核")]:a("span","暂无操作")}}],data:[],total:0,start:1,treeData:[],brandList:[],selection:[],supplierList:[],countList:{}}},methods:{ExamineLog:function(t){this.modal1=!0;var a=this;a.Axios.get("/Manage/ExamineLog/pageList",{params:{skuInfoId:t}}).then(function(t){a.data1=t.data.data.content})},audit:function(){var t=this;t.Axios.post("/Manage/SkuInfo/examine",t.Qs.stringify({id:t.formValidate1.id,rejectReason:t.formValidate1.rejectReason,approvalStatus:t.formValidate1.approvalStatus})).then(function(a){0===a.data.code?(t.modal=!1,t.getList(),t.count(),t.$Message.success("审核通过")):t.$Message.warning(a.data.message)})},screen:function(t){this.formValidate.classify=t,this.resetPage(),this.getList()},getList:function(){var t=this;t.loading1=!0,t.Axios.get("/Manage/SkuInfo/pageList",{params:{start:t.start-1,size:10,approvalStatus:t.formValidate.state,supplierId:t.formValidate.supplierId,skuInfoNameLike:t.formValidate.skuInfoNameLike,skuInfoNoLike:t.formValidate.skuInfoNoLike,category1:t.formValidate.classify[0],category2:t.formValidate.classify[1],category3:t.formValidate.classify[2],brandId:t.formValidate.brandId,recycleBin:!1}}).then(function(a){0===a.data.code?(t.data=a.data.data.content,t.total=a.data.data.totalElements):t.$Message.warning(a.data.message),t.loading1=!1})},paging:function(t){this.start=t,this.getList()},handleReset:function(t){this.$refs[t].resetFields(),this.resetPage(),this.formValidate.brandId="",this.formValidate.supplierId="",this.getList()},getTree:function(){var t=this;t.Axios.get("/Manage/Category/treeList").then(function(a){t.treeData=a.data.data})},getBrand:function(){var t=this;t.Axios.get("/Manage/Brand/list").then(function(a){t.brandList=a.data.data})},choice:function(t){for(var a in this.selection=[],t)this.selection.push(t[a].id)},batch:function(t){var a=this;a.selection.length>0?a.Axios.post("/Manage/SkuInfo/restore",this.Qs.stringify({skuInfoIds:a.selection},{indices:!1})).then(function(t){0===t.data.code?(a.getList(),a.$Message.success("还原商品成功")):a.$Message.warning(t.data.message)}):a.$Message.warning("至少选择一个商品")},selectList:function(){var t=this;t.Axios.get("/Manage/Supplier/selectList").then(function(a){t.supplierList=a.data.data})},count:function(){var t=this;t.Axios.get("/Manage/SkuInfo/count2").then(function(a){t.countList=a.data.data})},resetPage:function(){this.start=1,this.total=0}},mounted:function(){this.getList(),this.getTree(),this.getBrand(),this.selectList(),this.count()}},i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content"},[e("Card",{staticStyle:{border:"none",margin:"16px 0"}},[e("div",{staticClass:"ivu-page-header-title"},[t._v("商品审核")])]),t._v(" "),e("RadioGroup",{style:{margin:"0 0 0 20px",background:"#fff",height:"auto"},attrs:{size:"large",type:"button"},on:{"on-change":function(a){t.resetPage(),t.getList()}},model:{value:t.formValidate.state,callback:function(a){t.$set(t.formValidate,"state",a)},expression:"formValidate.state"}},[e("Radio",{staticStyle:{padding:"0 20px"},attrs:{label:"AUDITING"}},[t._v("\n      待审核 ("+t._s(t.countList.auditingCount)+")\n    ")]),t._v(" "),e("Radio",{staticStyle:{padding:"0 20px"},attrs:{label:"PASS"}},[t._v("\n      已通过 ("+t._s(t.countList.passCount)+")\n    ")]),t._v(" "),e("Radio",{staticStyle:{padding:"0 20px"},attrs:{label:"REJECT"}},[t._v("\n      未通过 ("+t._s(t.countList.notPassCount)+")\n    ")])],1),t._v(" "),e("Card",{style:{margin:"16px 20px",background:"#fff",height:"auto"}},[e("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      筛选查询\n    ")]),t._v(" "),e("Form",{ref:"formValidate",attrs:{model:t.formValidate,"label-width":80}},[e("Row",{attrs:{gutter:30}},[e("Col",{attrs:{xs:24,md:12,lg:8}},[e("FormItem",{attrs:{label:"商品名称：",prop:"skuInfoNameLike"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.skuInfoNameLike,callback:function(a){t.$set(t.formValidate,"skuInfoNameLike",a)},expression:"formValidate.skuInfoNameLike"}})],1)],1),t._v(" "),e("Col",{attrs:{xs:24,md:12,lg:8}},[e("FormItem",{attrs:{label:"商品分类：",prop:"classify"}},[e("Cascader",{attrs:{data:t.treeData},on:{"on-change":t.screen},model:{value:t.formValidate.classify,callback:function(a){t.$set(t.formValidate,"classify",a)},expression:"formValidate.classify"}})],1)],1),t._v(" "),e("Col",{attrs:{xs:24,md:12,lg:8}},[e("FormItem",{attrs:{label:"商品品牌：",prop:"brandNameLike"}},[e("Select",{attrs:{clearable:""},on:{"on-change":function(a){t.resetPage(),t.getList()}},model:{value:t.formValidate.brandId,callback:function(a){t.$set(t.formValidate,"brandId",a)},expression:"formValidate.brandId"}},t._l(t.brandList,function(a,o){return e("Option",{key:o,attrs:{value:a.id}},[t._v(t._s(a.brandName))])}))],1)],1),t._v(" "),e("Col",{attrs:{xs:24,md:12,lg:8}},[e("FormItem",{attrs:{label:"供应商：",prop:"brandNameLike"}},[e("Select",{attrs:{clearable:""},on:{"on-change":function(a){t.resetPage(),t.getList()}},model:{value:t.formValidate.supplierId,callback:function(a){t.$set(t.formValidate,"supplierId",a)},expression:"formValidate.supplierId"}},t._l(t.supplierList,function(a,o){return e("Option",{key:o,attrs:{value:a.id}},[t._v(t._s(a.supplierName)+"\n              ")])}))],1)],1),t._v(" "),e("Col",{attrs:{xs:24,md:12,lg:8}},[e("FormItem",{attrs:{label:"编号：",prop:"skuInfoNoLike"}},[e("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.skuInfoNoLike,callback:function(a){t.$set(t.formValidate,"skuInfoNoLike",a)},expression:"formValidate.skuInfoNoLike"}})],1)],1),t._v(" "),e("Col",{attrs:{xs:24,md:24,lg:8}},[e("FormItem",[e("Button",{staticStyle:{"margin-right":"6px"},attrs:{type:"primary"},on:{click:function(a){t.resetPage(),t.getList()}}},[t._v("查询")]),t._v(" "),e("Button",{staticStyle:{"margin-right":"6px"},on:{click:function(a){t.handleReset("formValidate")}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),e("Card",{style:{margin:"16px 20px",background:"#fff",height:"auto"}},[e("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      数据列表\n    ")]),t._v(" "),e("Table",{attrs:{loading:t.loading1,"show-header":!0,columns:t.columns,data:t.data},on:{"on-selection-change":t.choice}}),t._v(" "),e("div",{staticStyle:{width:"100%",height:"8px",background:"#ffffff","margin-top":"-4px","z-index":"99",position:"relative"}}),t._v(" "),e("div",{staticStyle:{width:"100%","text-align":"right","margin-top":"15px"}},[e("Page",{attrs:{total:Number(t.total),"page-size":10,"show-elevator":"","show-total":""},on:{"on-change":t.paging}})],1)],1),t._v(" "),e("Modal",{attrs:{width:"360"},model:{value:t.modal,callback:function(a){t.modal=a},expression:"modal"}},[e("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[e("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),e("span",[t._v("审核商品")])],1),t._v(" "),e("div",[e("Form",{ref:"formValidate1",attrs:{model:t.formValidate1,"label-width":80}},[e("FormItem",{attrs:{label:"商品名称：",prop:"name"}},[t._v("\n          "+t._s(t.formValidate1.name)+"\n        ")]),t._v(" "),e("FormItem",{attrs:{label:"商品审核：",prop:"approvalStatus"}},[e("RadioGroup",{model:{value:t.formValidate1.approvalStatus,callback:function(a){t.$set(t.formValidate1,"approvalStatus",a)},expression:"formValidate1.approvalStatus"}},[e("Radio",{attrs:{label:"PASS"}},[t._v("审核通过")]),t._v(" "),e("Radio",{attrs:{label:"REJECT"}},[t._v("审核不通过")])],1)],1),t._v(" "),"PASS"!==t.formValidate1.approvalStatus?e("FormItem",{attrs:{label:"反馈详情：",prop:"rejectReason"}},[e("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入反馈详情"},model:{value:t.formValidate1.rejectReason,callback:function(a){t.$set(t.formValidate1,"rejectReason",a)},expression:"formValidate1.rejectReason"}})],1):t._e()],1)],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"primary",size:"large"},on:{click:t.audit}},[t._v("确定")])],1)]),t._v(" "),e("Modal",{attrs:{width:"500"},model:{value:t.modal1,callback:function(a){t.modal1=a},expression:"modal1"}},[e("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[e("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),e("span",[t._v("审核详情")])],1),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("Table",{attrs:{columns:t.columns1,data:t.data1}}),t._v(" "),e("div",{staticStyle:{width:"100%",height:"8px",background:"#ffffff","margin-top":"-4px","z-index":"99",position:"relative"}})],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"primary",size:"large"},on:{click:function(a){t.modal1=!1}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var r=e("VU/8")(o,i,!1,function(t){e("ve7A")},"data-v-1571358d",null);a.default=r.exports},ve7A:function(t,a){}});
//# sourceMappingURL=26.2a9de1387627b097f253.js.map