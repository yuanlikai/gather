webpackJsonp([20],{cTMc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){var t=this;return{loading1:!0,data1:[],total:0,formValidate:{brandNameLike:""},columns:[{type:"selection",width:60,align:"center"},{title:"品牌名称",tooltip:!0,key:"brandName",minWidth:120,align:"center"},{title:"品牌简称",tooltip:!0,key:"abbrBrandName",minWidth:120,align:"center"},{title:"排序ID",tooltip:!0,key:"sortsNum",minWidth:120,align:"center",sortable:"custom"},{title:"关联供应商",tooltip:!0,key:"supplierCount",minWidth:120,align:"center",sortable:"custom"},{title:"是否显示",tooltip:!0,key:"display",minWidth:120,align:"center",render:function(e,a){return e("i-switch",{props:{value:a.row.display,size:"small"},on:{"on-change":function(e){t.Axios.post("/Manage/Brand/updateDisplay",t.Qs.stringify({id:a.row.id,display:!a.row.display})).then(function(e){0===e.data.code?t.getBrand():t.$Message.warning(e.data.message)})}}})}},{title:"操作",tooltip:!0,key:"ProductName",width:160,align:"center",render:function(e,a){return e("div",[e("a",{on:{click:function(){var e=t.$router.resolve({path:"/addBrand",query:{id:a.row.id}});window.open(e.href,"_blank")}}},"编辑"),e("Divider",{props:{type:"vertical"}}),e("Poptip",{props:{confirm:!0,transfer:!0,title:"确定删除该品牌？"},on:{"on-ok":function(){var e=t;e.Axios.post("/Manage/Brand/deleteBrand",e.Qs.stringify({id:a.row.id})).then(function(t){0===t.data.code?(e.getBrand(),e.$Message.success("删除成功")):e.$Message.error(t.data.message)})}}},[e("a","删除")])])}}],data:[],start:1,selection:[],sortsNum:"normal",supplierCount:"normal"}},methods:{getBrand:function(){var t=this;t.loading1=!0,t.Axios.get("/Manage/Brand/pageList",{params:{start:t.start-1,size:10,brandNameLike:t.formValidate.brandNameLike,sortsNumAsc:"normal"===t.sortsNum?"":"asc"===t.sortsNum,supplierCountAsc:"normal"===t.supplierCount?"":"asc"===t.supplierCount}}).then(function(e){0===e.data.code?(t.data=e.data.data.content,t.total=e.data.data.totalElements):t.$Message.warning(e.data.message),t.loading1=!1})},choice:function(t){for(var e in this.selection=[],t)this.selection.push(t[e].id)},batch:function(t){var e=this;e.selection.length>0?e.Axios.post("/Manage/Brand/batchUpdateDisplay",e.Qs.stringify({brandIds:e.selection,display:t},{indices:!1})).then(function(t){e.selection=[],0===t.data.code?(e.getBrand(),e.$Message.success("批量操作成功")):e.$Message.warning(t.data.message)}):e.$Message.warning("至少选择一个平台")},sorts:function(t){switch(this.loading1=!0,this.sortsNum="normal",this.supplierCount="normal",t.key){case"sortsNum":this.sortsNum=t.order;break;case"supplierCount":this.supplierCount=t.order}this.getBrand()},paging:function(t){this.start=t,this.getBrand()},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){e.resetPage(),e.getBrand()})},handleReset:function(t){this.$refs[t].resetFields(),this.resetPage(),this.getBrand()},resetPage:function(){this.start=1,this.total=0}},mounted:function(){this.getBrand()}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("Card",{staticStyle:{border:"none",margin:"16px 0"}},[a("div",{staticClass:"ivu-page-header-title"},[t._v("品牌管理")])]),t._v(" "),a("Card",{style:{margin:"16px 20px",background:"#fff",height:"auto"}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      筛选查询\n    ")]),t._v(" "),a("Form",{ref:"formValidate",attrs:{model:t.formValidate,"label-width":80}},[a("Row",{attrs:{gutter:30}},[a("Col",{attrs:{xs:24,md:12,lg:8}},[a("FormItem",{attrs:{label:"品牌名称：",prop:"brandNameLike"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.brandNameLike,callback:function(e){t.$set(t.formValidate,"brandNameLike",e)},expression:"formValidate.brandNameLike"}})],1)],1),t._v(" "),a("Col",{attrs:{xs:24,md:24,lg:8}},[a("FormItem",[a("Button",{staticStyle:{"margin-right":"6px"},attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("查询")]),t._v(" "),a("Button",{staticStyle:{"margin-right":"6px"},on:{click:function(e){t.handleReset("formValidate")}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("Card",{style:{margin:"16px 20px",background:"#fff",height:"auto"}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      数据列表\n    ")]),t._v(" "),a("router-link",{attrs:{target:"_blank",to:"/addBrand"}},[a("Button",{staticStyle:{width:"100%","margin-bottom":"16px"},attrs:{type:"dashed"}},[t._v("添加")])],1),t._v(" "),a("Table",{attrs:{loading:t.loading1,"show-header":!0,columns:t.columns,data:t.data},on:{"on-selection-change":t.choice,"on-sort-change":t.sorts}}),t._v(" "),a("div",{staticStyle:{width:"100%",height:"8px",background:"#ffffff","margin-top":"-4px","z-index":"99",position:"relative"}}),t._v(" "),a("div",{staticStyle:{width:"100%","text-align":"right","margin-top":"15px"}},[a("ButtonGroup",{staticStyle:{float:"left"}},[a("Button",{attrs:{type:"dashed"},on:{click:function(e){t.batch("true")}}},[t._v("批量显示")]),t._v(" "),a("Button",{attrs:{type:"dashed"},on:{click:function(e){t.batch("false")}}},[t._v("批量隐藏")])],1),t._v(" "),a("Page",{attrs:{total:Number(t.total),"page-size":10,"show-elevator":"","show-total":""},on:{"on-change":t.paging}})],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,i,!1,function(t){a("svY4")},"data-v-4223feaa",null);e.default=s.exports},svY4:function(t,e){}});
//# sourceMappingURL=20.7427ce84c2aac968280c.js.map