webpackJsonp([4],{CH4r:function(t,e){},F0ee:function(t,e){},QcLP:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("Modal",{attrs:{width:"540"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),a("span",[t._v("编辑货品信息")])],1),t._v(" "),a("div",[a("Table",{attrs:{columns:t.columns,data:t.data}}),t._v(" "),a("div",{staticStyle:{width:"100%",height:"8px",background:"#ffffff","margin-top":"-4px","z-index":"99",position:"relative"}})],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:t.loading,size:"large"},on:{click:t.update}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("Modal",{attrs:{width:"300"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),a("span",[t._v("编辑SKU库存")])],1),t._v(" "),a("div",[a("Row",[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"SKU编号",prop:"skuInfoNo"}},[a("p",[t._v(t._s(t.formValidate.skuInfoNo))])]),t._v(" "),a("FormItem",{attrs:{label:"商品名称",prop:"skuInfoName"}},[a("p",[t._v(t._s(t.formValidate.skuInfoName))])]),t._v(" "),a("FormItem",{attrs:{label:"商品库存",prop:"stock"}},[a("Input",{attrs:{placeholder:"Enter your name"},model:{value:t.formValidate.stock,callback:function(e){t.$set(t.formValidate,"stock",e)},expression:"formValidate.stock"}})],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:t.loading,size:"large"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var i={components:{editorProduct:a("VU/8")({data:function(){var t=this;return{modal:!1,loading:!1,id:"",columns:[{title:"SKU编号",align:"center",key:"skuInfoNo"},{title:"市场价",align:"center",key:"marketPrice",render:function(e,a){return e("input",{style:{width:"83px",border:"1px solid #dcdee2",padding:"0 4px",outline:"none"},attrs:{value:a.row.marketPrice,type:"text",maxlength:"7"},on:{input:function(t){t.target.value.length<1&&(t.target.value=1),t.target.value=t.target.value.match(/\d+(\.\d{0,2})?/)?t.target.value.match(/\d+(\.\d{0,2})?/)[0]:""},blur:function(e){t.data[a.index].marketPrice=e.target.value}}})}},{title:"销售价",align:"center",key:"price",render:function(e,a){return e("input",{style:{width:"83px",border:"1px solid #dcdee2",padding:"0 4px"},attrs:{value:a.row.price,type:"text",maxlength:"7"},on:{input:function(t){t.target.value.length<1&&(t.target.value=1),t.target.value=t.target.value.match(/\d+(\.\d{0,2})?/)?t.target.value.match(/\d+(\.\d{0,2})?/)[0]:""},blur:function(e){t.data[a.index].price=e.target.value}}})}},{title:"折扣",align:"center",key:"discount",render:function(e,a){return e("input",{style:{width:"83px",border:"1px solid #dcdee2",padding:"0 4px"},attrs:{value:a.row.discount?a.row.discount:"",type:"text",maxlength:"7"},on:{input:function(t){t.target.value=t.target.value.match(/\d+(\.\d{0,1})?/)?t.target.value.match(/\d+(\.\d{0,1})?/)[0]:""},blur:function(e){t.data[a.index].discount=e.target.value}}})}},{title:"平台",align:"center",key:"platformName"}],data:[]}},methods:{update:function(){var t=this;t.loading=!0,t.Axios.post("/Manage/OnsalePrice/update",t.data).then(function(e){0===e.data.code?(t.modal=!1,t.$Message.success("成功")):t.$Message.warning(e.data.message),t.loading=!1})},getList:function(t){var e=this;e.Axios.get("/Manage/OnsalePrice/onsalePriceList",{params:{skuInfoId:t}}).then(function(t){e.data=t.data.data})}},mounted:function(){}},o,!1,function(t){a("jgmz")},"data-v-288a12d7",null).exports,repertory:a("VU/8")({data:function(){return{loading:!1,formValidate:{skuInfoName:"",skuInfoNo:"",stock:"",supplierKey:""},ruleValidate:{stock:[{required:!0,message:"商品库存不能为空",trigger:"blur"}]},modal:!1,skuInfoName:"",data1:[]}},methods:{handleSubmit:function(t){var e=this,a=this;this.$refs[t].validate(function(t){t?(a.loading=!0,a.Axios.post("/Manage/SkuInfo/updateStock",a.Qs.stringify({skuInfoNo:a.formValidate.skuInfoNo,stock:a.formValidate.stock,supplierKey:a.formValidate.supplierKey})).then(function(t){0===t.data.code?(a.$emit("getList"),a.modal=!1,a.$Message.success("修改成功！")):a.$Message.warning(t.data.message),a.loading=!1})):e.$Message.warning("商品库存不能为空")})},handleReset:function(t){this.$refs[t].resetFields()}},mounted:function(){}},n,!1,function(t){a("CH4r")},"data-v-6a30d7a8",null).exports},data:function(){var t=this;return{modal:!1,state:"all",loading1:!0,countList:{},onsalePlatform:{},formValidate:{skuInfoNameLike:"",skuInfoNoLike:"",classify:[],brandId:"",supplierId:""},columns:[{type:"selection",width:60,align:"center"},{title:"商品图片",tooltip:!0,width:120,align:"center",key:"skuInfoPicUrl",render:function(t,e){return t("Poptip",{props:{trigger:"hover",placement:"right"}},[t("img",{style:{cursor:"pointer",height:"30px"},attrs:{src:e.row.skuInfoPicUrl}}),t("div",{attrs:{class:"api"},slot:"content"},[t("img",{style:{height:"200px"},attrs:{src:e.row.skuInfoPicUrl}})])])}},{title:"商品名称",tooltip:!0,minWidth:150,key:"skuInfoName",render:function(e,a){return e("div",[e("a",{style:{float:"left",width:"100%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},on:{click:function(){var e=t.$router.resolve({path:"/examine",query:{examineId:a.row.id}});window.open(e.href,"_blank")}}},a.row.skuInfoName),e("div",{style:{color:"#888888"}},"品牌："+(a.row.brandName?a.row.brandName:"未绑定"))])}},{title:"SKU编号",tooltip:!0,minWidth:70,key:"skuInfoNo",align:"center"},{title:"价格",tooltip:!0,key:"price",minWidth:70,sortable:"custom",align:"center",render:function(e,a){return e("div",[e(a.row.onSale?"a":"p",{style:{marginTop:"2px"},on:{click:function(){a.row.onSale&&(t.$refs.editor.getList(a.row.id),t.$refs.editor.modal=!0)}}},a.row.price)])}},{title:"上架平台",minWidth:70,tooltip:!0,key:"onsalePCount",align:"center",render:function(e,a){return e("a",{on:{click:function(){t.Axios.get("/Manage/SkuInfo/onsalePlatform",{params:{id:a.row.id}}).then(function(e){t.onsalePlatform=e.data.data,t.modal=!0})}}},a.row.onsalePCount+" / "+a.row.canOnsalePCount)}},{title:"供应商",minWidth:70,tooltip:!0,key:"supplierName",align:"center"},{title:"发货",tooltip:!0,minWidth:70,key:"stockType",align:"center",render:function(t,e){return"DF"===e.row.stockType?t("p","代发"):"NHJ"===e.row.stockType?t("p","南华街"):"JS"===e.row.stockType?t("p","嘉善"):"GYS"===e.row.stockType?t("p","供应商"):t("p","其他")},filters:[{label:"代发",value:"DF"},{label:"供应商",value:"GYS"},{label:"南华街",value:"NHJ"},{label:"嘉善",value:"JS"},{label:"其他",value:"OTHER"}],filterMultiple:!1,filterRemote:function(t){this.$parent.resetPage(),this.$parent.stockType=t.length>0?t[0]:"",this.$parent.getList()}},{title:"维护方式",tooltip:!0,minWidth:70,key:"updMethod",align:"center",render:function(t,e){return"MANUAL"===e.row.updMethod?t("p","手动"):"AUTO"===e.row.updMethod?t("p","自动"):"BATCH"===e.row.updMethod?t("p","回滚"):void 0}},{title:"SKU库存",tooltip:!0,minWidth:70,align:"center",render:function(e,a){return e("div",[e("a",{style:{width:"100%",display:"block"},on:{click:function(){t.$refs.repertory.formValidate.supplierKey=a.row.supplierKey,t.$refs.repertory.formValidate.stock=String(a.row.stock),t.$refs.repertory.formValidate.skuInfoNo=a.row.skuInfoNo,t.$refs.repertory.formValidate.skuInfoName=a.row.skuInfoName,t.$refs.repertory.modal=!0}}},a.row.stock)])}},{title:"状态",tooltip:!0,minWidth:70,align:"center",render:function(t,e){return t("div",[t("Badge",{props:{status:!0===e.row.onSale?"success":"error"}}),t("span",!0===e.row.onSale?"上架":"下架")])},filters:[{label:"上架",value:"true"},{label:"下架",value:"false"}],filterMultiple:!1,filterRemote:function(t){this.$parent.resetPage(),this.$parent.state=t.length>0?t[0]:"all",this.$parent.getList()}},{title:"操作",tooltip:!0,key:"ProductName",width:188,align:"center",render:function(e,a){return e("div",[e("div",[!0===a.row.onSale?e("Poptip",{props:{confirm:!0,transfer:!0,title:"确定下架该商品？"},on:{"on-ok":function(){var e=t;e.Axios.post("/Manage/SkuInfo/batchUnSold",e.Qs.stringify({skuInfoIds:[a.row.id]},{indices:!1})).then(function(t){0===t.data.code?(e.getList(),e.$Message.success("下架成功！")):e.$Message.warning(t.data.message)})}}},[e("a",{style:{color:"#ed4014"}},"下架")]):e("a",{style:{color:"#19be6b"},on:{click:function(){var e=t.$router.resolve({path:"/putaway",query:{ids:[a.row.id]}});window.open(e.href,"_blank")}}},"上架"),e("Divider",{props:{type:"vertical"}}),e("a",{on:{click:function(){var e=t.$router.resolve({path:"/addArticle",query:{id:a.row.id}});window.open(e.href,"_blank")}}},"编辑"),e("Divider",{props:{type:"vertical"}}),e("a",{on:{click:function(){var e=t.$router.resolve({path:"/productLog",query:{id:a.row.id}});window.open(e.href,"_blank")}}},"日志"),e("Divider",{props:{type:"vertical"}}),e("Poptip",{props:{confirm:!0,transfer:!0,title:"确定删除该商品？"},on:{"on-ok":function(){!0===a.row.onSale?t.$Message.warning("不能删除已上架产品"):t.Axios.post("/Manage/SkuInfo/recycleBin",t.Qs.stringify({skuInfoIds:[a.row.id]},{indices:!1})).then(function(e){0===e.data.code?(t.getList(),t.$Message.success("成功加入回收站")):t.$Message.warning(e.data.message)})}}},[e("a","删除")])])])}}],data:[],total:0,start:1,treeData:[],brandList:[],selection:[],supplierList:[],priceAsc:"normal",stockType:""}},methods:{screen:function(t){this.formValidate.classify=t,this.resetPage(),this.getList()},getList:function(){var t=this;t.loading1=!0,t.Axios.get("/Manage/SkuInfo/supplierSkuPageList",{params:{start:t.start-1,size:10,approvalStatus:"PASS",stockType:t.stockType,supplierId:t.formValidate.supplierId,skuInfoNameLike:t.formValidate.skuInfoNameLike,skuInfoNoLike:t.formValidate.skuInfoNoLike,category1:t.formValidate.classify[0],category2:t.formValidate.classify[1],category3:t.formValidate.classify[2],brandId:t.formValidate.brandId,recycleBin:!1,haveOnsaleCount:!0,priceAsc:"normal"===t.priceAsc?"":"asc"===t.priceAsc,onSale:"all"===t.state?"":t.state}}).then(function(e){console.log(e.data),0===e.data.code?(t.data=e.data.data.content,t.total=e.data.data.totalElements):t.$Message.warning(e.data.message),t.loading1=!1})},paging:function(t){this.start=t,this.getList()},handleReset:function(t){this.$refs[t].resetFields(),this.resetPage(),this.formValidate.brandId="",this.formValidate.supplierId="",this.getList()},getTree:function(){var t=this;t.Axios.get("/Manage/Category/treeList").then(function(e){t.treeData=e.data.data})},getBrand:function(){var t=this;t.Axios.get("/Manage/Brand/selectBrand").then(function(e){t.brandList=e.data.data})},choice:function(t){for(var e in this.selection=[],t)this.selection.push(t[e].id)},batch:function(t){var e=this,a=this;a.selection.length>0?a.Axios.post("/Manage/SkuInfo/batchUnSold",a.Qs.stringify({skuInfoIds:a.selection},{indices:!1})).then(function(t){0===t.data.code?(e.getList(),a.$Message.success("批量下架成功！")):a.$Message.warning(t.data.message)}):a.$Message.warning("至少选择一个商品")},putaway:function(){var t=this.$router.resolve({path:"/putaway",query:{ids:this.selection}});window.open(t.href,"_blank")},selectList:function(){var t=this;t.Axios.get("/Manage/Supplier/selectList").then(function(e){t.supplierList=e.data.data})},count:function(){var t=this;t.Axios.get("/Manage/SkuInfo/count1",{params:{supplierId:"1"}}).then(function(e){t.countList=e.data.data})},sorts:function(t){switch(this.priceAsc="normal",t.key){case"price":this.priceAsc=t.order}this.getList()},resetPage:function(){this.start=1,this.total=0}},mounted:function(){this.getList(),this.getTree(),this.getBrand(),this.count()}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("Card",{staticStyle:{border:"none",margin:"16px 0"}},[a("div",{staticClass:"ivu-page-header-title"},[t._v("商品列表")])]),t._v(" "),a("RadioGroup",{style:{margin:"0 0 0 20px",background:"#fff",height:"auto"},attrs:{size:"large",type:"button"},on:{"on-change":function(e){t.resetPage(),t.getList()}},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[a("Radio",{staticStyle:{padding:"0 20px"},attrs:{label:"all"}},[t._v("\n      全部商品 ("+t._s(t.countList.totle)+")\n    ")]),t._v(" "),a("Radio",{staticStyle:{padding:"0 20px"},attrs:{label:"true"}},[t._v("\n      上架 ("+t._s(t.countList.onSaleCount)+")\n    ")]),t._v(" "),a("Radio",{staticStyle:{padding:"0 20px"},attrs:{label:"false"}},[t._v("\n      下架 ("+t._s(t.countList.notSaleCount)+")\n    ")])],1),t._v(" "),a("Card",{style:{margin:"16px 20px",background:"#fff",height:"auto"}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      筛选查询\n    ")]),t._v(" "),a("Form",{ref:"formValidate",attrs:{model:t.formValidate,"label-width":80}},[a("Row",{attrs:{gutter:30}},[a("Col",{attrs:{xs:24,md:12,lg:8}},[a("FormItem",{attrs:{label:"商品名称：",prop:"skuInfoNameLike"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.skuInfoNameLike,callback:function(e){t.$set(t.formValidate,"skuInfoNameLike",e)},expression:"formValidate.skuInfoNameLike"}})],1)],1),t._v(" "),a("Col",{attrs:{xs:24,md:12,lg:8}},[a("FormItem",{attrs:{label:"商品分类：",prop:"classify"}},[a("Cascader",{attrs:{data:t.treeData},on:{"on-change":t.screen},model:{value:t.formValidate.classify,callback:function(e){t.$set(t.formValidate,"classify",e)},expression:"formValidate.classify"}})],1)],1),t._v(" "),a("Col",{attrs:{xs:24,md:12,lg:8}},[a("FormItem",{attrs:{label:"商品品牌：",prop:"brandNameLike"}},[a("Select",{attrs:{clearable:""},on:{"on-change":function(e){t.resetPage(),t.getList()}},model:{value:t.formValidate.brandId,callback:function(e){t.$set(t.formValidate,"brandId",e)},expression:"formValidate.brandId"}},t._l(t.brandList,function(e,o){return a("Option",{key:o,attrs:{value:e.id}},[t._v(t._s(e.brandName))])}))],1)],1),t._v(" "),a("Col",{attrs:{xs:24,md:12,lg:8}},[a("FormItem",{attrs:{label:"编号：",prop:"skuInfoNoLike"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.skuInfoNoLike,callback:function(e){t.$set(t.formValidate,"skuInfoNoLike",e)},expression:"formValidate.skuInfoNoLike"}})],1)],1),t._v(" "),a("Col",{attrs:{xs:24,md:24,lg:8}},[a("FormItem",[a("Button",{staticStyle:{"margin-right":"6px"},attrs:{type:"primary"},on:{click:function(e){t.resetPage(),t.getList()}}},[t._v("查询")]),t._v(" "),a("Button",{staticStyle:{"margin-right":"6px"},on:{click:function(e){t.handleReset("formValidate")}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("Card",{style:{margin:"16px 20px",background:"#fff",height:"auto"}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      数据列表\n    ")]),t._v(" "),a("Table",{attrs:{loading:t.loading1,"show-header":!0,columns:t.columns,data:t.data},on:{"on-selection-change":t.choice,"on-sort-change":t.sorts}}),t._v(" "),a("div",{staticStyle:{width:"100%",height:"8px",background:"#ffffff","margin-top":"-4px","z-index":"99",position:"relative"}}),t._v(" "),a("div",{staticStyle:{width:"100%","text-align":"right","margin-top":"15px"}},[a("Button",{directives:[{name:"show",rawName:"v-show",value:"true"===t.state,expression:"state==='true'"}],staticStyle:{float:"left","margin-left":"22px","text-align":"left"},on:{click:t.batch}},[t._v("批量下架\n      ")]),t._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:"false"===t.state,expression:"state==='false'"}],staticStyle:{float:"left","margin-left":"22px","text-align":"left"},on:{click:t.putaway}},[t._v("批量上架\n      ")]),t._v(" "),a("Page",{attrs:{total:Number(t.total),"page-size":10,"show-elevator":"","show-total":""},on:{"on-change":t.paging}})],1)],1),t._v(" "),a("editorProduct",{ref:"editor"}),t._v(" "),a("repertory",{ref:"repertory",on:{getList:t.getList}}),t._v(" "),a("Modal",{attrs:{width:"500"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),a("span",[t._v("上架平台")])],1),t._v(" "),a("div",[a("Row",{staticStyle:{background:"#eee",padding:"10px"}},[a("Col",{attrs:{span:"11"}},[a("Card",{attrs:{bordered:!1}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("已上架平台")]),t._v(" "),t._l(t.onsalePlatform.onsalePlatforms,function(e,o){return a("p",{key:o},[t._v(t._s(e))])})],2)],1),t._v(" "),a("Col",{attrs:{span:"11",offset:"2"}},[a("Card",{attrs:{shadow:""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("可上架平台")]),t._v(" "),t._l(t.onsalePlatform.canOnsalePlatforms,function(e,o){return a("p",{key:o},[t._v(t._s(e))])})],2)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",size:"large"},on:{click:function(e){t.modal=!1}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var s=a("VU/8")(i,r,!1,function(t){a("F0ee")},"data-v-4cc4c11a",null);e.default=s.exports},jgmz:function(t,e){}});
//# sourceMappingURL=4.3266c46132e93ccd957f.js.map