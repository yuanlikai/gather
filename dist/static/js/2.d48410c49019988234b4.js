webpackJsonp([2],{UR8K:function(e,t){},d302:function(e,t){},f5xS:function(e,t){},"icd+":function(e,t){},imYJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={props:["row","getMenu","getMenuList"],data:function(){var e=this;return{id:"",status:"",module:"",addAccount:!1,modal_loading:!1,formValidate:{menuName:"",menuUrl:"",numb:""},ruleValidate:{menuName:[{required:!0,message:"请输入名称",trigger:"blur"}],menuUrl:[{required:!0,message:"请输入路径",trigger:"blur"}],numb:[{required:!0,message:"请输入唯一标识",trigger:"blur"}]},columns1:[{type:"index",align:"center",width:50},{title:"菜单名称",key:"menuName",align:"center",minWidth:88},{title:"菜单类型",key:"numb",align:"center",minWidth:88,render:function(e,t){return e("p",t.row.menuType.name)}},{title:"菜单路径",key:"menuUrl",align:"center",minWidth:88},{title:"唯一标识",key:"numb",align:"center",minWidth:88},{title:"操作",minWidth:88,align:"center",render:function(t,a){return t("div",[t("a",{props:{type:"ios-create",size:"20"},style:{height:"12px",marginRight:"5px",paddingRight:"5px",borderRight:"1px solid #e8eaec"},on:{click:function(){e.getChild({id:a.row.id,parentId:a.row.parentId,numb:a.row.numb,menuUrl:a.row.menuUrl,menuName:a.row.menuName})}}},"修改"),t("Poptip",{props:{confirm:!0,transfer:!0,placement:"top",title:"确定删除该菜单？"},on:{"on-ok":function(){var t=e;t.Axios.post("/Manage/Menu/deleteMenus",t.Qs.stringify({id:a.row.id},{indices:!1})).then(function(e){0===e.data.code?(t.data1.splice(a.row._index,1),t.$Message.success("删除成功")):t.$Message.error(e.data.message)})}}},[t("a",{props:{type:"md-trash",size:"20"},style:{cursor:"pointer"}},"刪除")])])}}],data1:this.row.reverse()}},methods:{getChild:function(e){this.status="修改",this.addAccount=!0,this.id=e.id,this.formValidate.parentId=e.parentId,this.formValidate.numb=e.numb,this.formValidate.menuUrl=e.menuUrl,this.formValidate.menuName=e.menuName,this.module="《"+e.menuName+"》"},handleSubmit:function(e){var t=this;t.$refs[e].validate(function(e){if(e)return t.modal_loading=!0,void t.Axios.post("/EditMenu.ashx",{id:Number(t.id),parentId:Number(t.formValidate.parentId),menuName:t.formValidate.menuName,menuUrl:t.formValidate.menuUrl,numb:t.formValidate.numb}).then(function(e){0===e.data.error?(t.getMenuList(),t.addAccount=!1):t.$Message.error(e.data.errorMsg),t.modal_loading=!1});t.$Message.error("有必填项未填写!")})},handleReset:function(e){this.$refs[e].resetFields()}},mounted:function(){}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Table",{attrs:{border:"",columns:e.columns1,data:e.data1}}),e._v(" "),a("div",{staticStyle:{width:"100%",height:"1px",background:"#ffffff","margin-top":"-1px","z-index":"3",position:"relative"}}),e._v(" "),a("Modal",{attrs:{width:"300"},model:{value:e.addAccount,callback:function(t){e.addAccount=t},expression:"addAccount"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),e._v(" "),a("span",[e._v(e._s(e.module)+" "+e._s(""===e.id?e.status+"模块":e.status+"菜单"))])],1),e._v(" "),a("div",[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":70}},[a("FormItem",{attrs:{label:"菜单名称",prop:"menuName"}},[a("Input",{attrs:{maxlength:10,placeholder:"请输入菜单名称"},model:{value:e.formValidate.menuName,callback:function(t){e.$set(e.formValidate,"menuName",t)},expression:"formValidate.menuName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"菜单路径",prop:"menuUrl"}},[a("Input",{attrs:{maxlength:30,placeholder:"请输入菜单路径"},model:{value:e.formValidate.menuUrl,callback:function(t){e.$set(e.formValidate,"menuUrl",t)},expression:"formValidate.menuUrl"}})],1),e._v(" "),a("FormItem",{attrs:{label:"唯一标识",prop:"numb"}},[a("Input",{attrs:{maxlength:10,loading:e.modal_loading,placeholder:"请输入唯一标识"},model:{value:e.formValidate.numb,callback:function(t){e.$set(e.formValidate,"numb",t)},expression:"formValidate.numb"}})],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"success",size:"large",long:""},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("\n        "+e._s(e.status)+"\n      ")])],1)])],1)},staticRenderFns:[]};var i=a("VU/8")(n,r,!1,function(e){a("icd+"),a("d302")},"data-v-19351132",null).exports,o={components:{expandRow:i},props:["row","getMenu","getChild","getMenuList"],data:function(){var e=this;return{id:"",status:"",module:"",addAccount:!1,modal_loading:!1,formValidate:{menuName:"",menuUrl:"",numb:"",parentId:""},ruleValidate:{menuName:[{required:!0,message:"请输入名称",trigger:"blur"}],menuUrl:[{required:!0,message:"请输入路径",trigger:"blur"}],numb:[{required:!0,message:"请输入唯一标识",trigger:"blur"}]},columns1:[{type:"expand",width:50,render:function(t,a){return t(i,{props:{row:a.row.children,getMenu:e.getMenu,getChild:e.getChild,getMenuList:e.getMenuList}})}},{title:"菜单名称",key:"menuName",align:"center",minWidth:88},{title:"菜单类型",key:"numb",align:"center",minWidth:88,render:function(e,t){return e("p",t.row.menuType.name)}},{title:"唯一标识",key:"numb",align:"center",minWidth:88},{title:"操作",minWidth:88,align:"center",render:function(t,a){return t("div",[t("a",{style:{height:"12px",marginRight:"5px",paddingRight:"5px",borderRight:"1px solid #e8eaec"},on:{click:function(){e.status="添加",e.handleReset("formValidate"),e.addAccount=!0,e.id=-1,e.formValidate.parentId=a.row.id,e.module="《"+a.row.menuName+"》"}}},"添加"),t("a",{props:{type:"ios-create",size:"20"},style:{height:"12px",marginRight:"5px",paddingRight:"5px",borderRight:"1px solid #e8eaec"},on:{click:function(){console.log(a.row),e.getChild({id:a.row.id,parentId:a.row.parentId,numb:a.row.numb,menuUrl:a.row.menuUrl,menuName:a.row.menuName})}}},"修改"),t("Poptip",{props:{confirm:!0,transfer:!0,placement:"top",title:"确定删除该菜单？"},on:{"on-ok":function(){var t=e;t.Axios.post("/Manage/Menu/deleteMenus",t.Qs.stringify({id:a.row.id},{indices:!1})).then(function(e){0===e.data.code?(t.data1.splice(a.row._index,1),t.$Message.success("删除成功")):t.$Message.error(e.data.message)})}}},[t("a",{props:{type:"md-trash",size:"20"},style:{cursor:"pointer"}},"刪除")])])}}],data1:this.row.reverse()}},methods:{handleSubmit:function(e){var t=this;t.$refs[e].validate(function(e){if(e)return t.modal_loading=!0,void t.Axios.post("/EditMenu.ashx",{id:Number(t.id),parentId:Number(t.formValidate.parentId),menuName:t.formValidate.menuName,menuUrl:t.formValidate.menuUrl,numb:t.formValidate.numb}).then(function(e){0===e.data.error?(t.getMenuList(),t.addAccount=!1):t.$Message.error(e.data.errorMsg),t.modal_loading=!1});t.$Message.error("有必填项未填写!")})},handleReset:function(e){this.$refs[e].resetFields()}},mounted:function(){}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Table",{attrs:{border:"",columns:e.columns1,data:e.data1}}),e._v(" "),a("div",{staticStyle:{width:"100%",height:"1px",background:"#ffffff","margin-top":"-1px","z-index":"3",position:"relative"}}),e._v(" "),a("Modal",{attrs:{width:"300"},model:{value:e.addAccount,callback:function(t){e.addAccount=t},expression:"addAccount"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),e._v(" "),a("span",[e._v(e._s(e.module)+" "+e._s(""===e.id?e.status+"模块":e.status+"菜单"))])],1),e._v(" "),a("div",[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":70}},[a("FormItem",{attrs:{label:"菜单名称",prop:"menuName"}},[a("Input",{attrs:{maxlength:10,placeholder:"请输入菜单名称"},model:{value:e.formValidate.menuName,callback:function(t){e.$set(e.formValidate,"menuName",t)},expression:"formValidate.menuName"}})],1),e._v(" "),""!==e.formValidate.menuUrl||""!==e.id&&"修改"!==e.status?a("FormItem",{attrs:{label:"菜单路径",prop:"menuUrl"}},[a("Input",{attrs:{maxlength:30,placeholder:"请输入菜单路径"},model:{value:e.formValidate.menuUrl,callback:function(t){e.$set(e.formValidate,"menuUrl",t)},expression:"formValidate.menuUrl"}})],1):e._e(),e._v(" "),a("FormItem",{attrs:{label:"唯一标识",prop:"numb"}},[a("Input",{attrs:{maxlength:10,loading:e.modal_loading,placeholder:"请输入唯一标识"},model:{value:e.formValidate.numb,callback:function(t){e.$set(e.formValidate,"numb",t)},expression:"formValidate.numb"}})],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"success",size:"large",long:""},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("\n        "+e._s(e.status)+"\n      ")])],1)])],1)},staticRenderFns:[]};var l=a("VU/8")(o,d,!1,function(e){a("UR8K"),a("f5xS")},"data-v-6da678dc",null).exports,s={components:{expandRow:l},data:function(){var e=this;return{modal_loading:!1,id:-1,status:"添加",module:"",addAccount:!1,loading:!0,columns:[{type:"expand",width:50,render:function(t,a){return t(l,{props:{row:a.row.children,getMenu:e.getMenu,getChild:e.getChild,getMenuList:e.getMenuList}})}},{title:"菜单名称",key:"menuName",minWidth:88,align:"center"},{title:"菜单类型",key:"age",minWidth:88,align:"center",render:function(e,t){return e("div",t.row.menuType.name)}},{title:"唯一标识",key:"numb",minWidth:88,align:"center"},{title:"操作",align:"center",maxWidth:200,minWidth:134,render:function(t,a){return t("div",[t("a",{on:{click:function(){e.status="添加",e.handleReset("formValidate"),e.addAccount=!0,e.id=-1,e.formValidate.parentId=a.row.id,e.module="《"+a.row.menuName+"》"}}},"添加"),t("Divider",{props:{type:"vertical"}}),t("a",{on:{click:function(){e.status="修改",e.addAccount=!0,e.id=a.row.id,e.formValidate.parentId=0,e.formValidate.menuUrl="",e.formValidate.numb=a.row.numb,e.formValidate.menuName=a.row.menuName,e.module="《"+a.row.menuName+"》"}}},"编辑"),t("Divider",{props:{type:"vertical"}}),t("Poptip",{props:{confirm:!0,transfer:!0,title:"确定删除该菜单？"},on:{"on-ok":function(){var t=e;t.Axios.post("/Manage/Menu/deleteMenus",t.Qs.stringify({id:a.row.id},{indices:!1})).then(function(e){0===e.data.code?(t.getMenuList(),t.$Message.success("删除成功")):t.$Message.error(e.data.message)})}}},[t("a","删除")])])}}],data:[],formValidate:{menuName:"",menuUrl:"",numb:"",parentId:0},ruleValidate:{menuName:[{required:!0,message:"请输入名称",trigger:"blur"}],menuUrl:[{required:!0,message:"请输入路径",trigger:"blur"}],numb:[{required:!0,message:"请输入唯一标识",trigger:"blur"}]}}},methods:{getChild:function(e){this.status="修改",this.addAccount=!0,this.id=e.id,this.formValidate.numb=e.numb,this.formValidate.parentId=e.parentId,this.formValidate.menuName=e.menuName,this.module="《"+e.menuName+"》",console.log(this.formValidate)},handleSubmit:function(e){var t=this;t.$refs[e].validate(function(e){if(e)return t.modal_loading=!0,void t.Axios.post("/EditMenu.ashx",{id:Number(t.id),parentId:Number(t.formValidate.parentId),menuName:t.formValidate.menuName,menuUrl:t.formValidate.menuUrl,numb:t.formValidate.numb}).then(function(e){0===e.data.error?(t.getMenuList(),t.addAccount=!1):t.$Message.error(e.data.errorMsg),t.modal_loading=!1});t.$Message.error("有必填项未填写!")})},addMenu:function(){this.id=-1,this.status="添加",this.handleReset("formValidate"),this.formValidate.menuUrl="",this.addAccount=!0},handleReset:function(e){this.$refs[e].resetFields()},getMenuList:function(){var e=this;e.loading=!0,e.Axios.post("/GetMenuList.ashx").then(function(t){0===t.data.error?e.data=t.data.data.sort(function(e,t){return Number(e.numb)-Number(t.numb)}):e.$Message.error(t.data.message),e.loading=!1})}},mounted:function(){this.getMenuList()}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("Card",{staticStyle:{border:"none",margin:"16px 0"}},[a("div",{staticClass:"ivu-page-header-title"},[e._v("菜单管理")])]),e._v(" "),a("Card",{style:{margin:"0 20px 20px 20px",background:"#fff",height:"auto"}},[e.loading?a("Spin",{attrs:{fix:""}}):e._e(),e._v(" "),a("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n      基础列表\n    ")]),e._v(" "),a("Button",{staticStyle:{width:"100%","margin-bottom":"16px"},attrs:{type:"dashed"},on:{click:e.addMenu}},[e._v("添加")]),e._v(" "),a("Table",{attrs:{"show-header":!0,columns:e.columns,data:e.data}}),e._v(" "),a("div",{staticStyle:{width:"100%",height:"2px",background:"#ffffff","margin-top":"-1px","z-index":"3",position:"relative"}})],1),e._v(" "),a("Modal",{attrs:{width:"300"},model:{value:e.addAccount,callback:function(t){e.addAccount=t},expression:"addAccount"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),e._v(" "),a("span",[e._v(e._s(e.module)+" "+e._s(""===e.id?e.status+"模块":e.status+"菜单"))])],1),e._v(" "),a("div",[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":70}},[a("FormItem",{attrs:{label:"菜单名称",prop:"menuName"}},[a("Input",{attrs:{maxlength:10,placeholder:"请输入菜单名称"},model:{value:e.formValidate.menuName,callback:function(t){e.$set(e.formValidate,"menuName",t)},expression:"formValidate.menuName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"唯一标识",prop:"numb"}},[a("Input",{attrs:{maxlength:10,loading:e.modal_loading,placeholder:"请输入唯一标识"},model:{value:e.formValidate.numb,callback:function(t){e.$set(e.formValidate,"numb",t)},expression:"formValidate.numb"}})],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"success",size:"large",long:""},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("\n        "+e._s(e.status)+"\n      ")])],1)])],1)},staticRenderFns:[]};var m=a("VU/8")(s,u,!1,function(e){a("nTAF")},"data-v-c2b2987a",null);t.default=m.exports},nTAF:function(e,t){}});