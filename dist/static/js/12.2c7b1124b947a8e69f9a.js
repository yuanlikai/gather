webpackJsonp([12],{"1sJW":function(e,a){},"gSu+":function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t={components:{upImg:r("JNXG").a},data:function(){var e=this;return{status:!0,detail:{},formValidate:{id:"",supplierName:"",abbrSupplierName:"",supplierNo:"",productLim:"999",logoUrl:"",erpSupplierNo:""},ruleValidate:{supplierName:[{validator:function(a,r,t){var i=e;r?i.Axios.get("/Manage/Supplier/valid/supplierName",{params:{id:i.$route.query.id?i.$route.query.id:"",value:r}}).then(function(e){0===e.data.code?t():t(new Error("企业名称重复"))}):t(new Error("请输入企业名称"))},required:!0,trigger:"blur"}],abbrSupplierName:[{validator:function(a,r,t){var i=e;r?i.Axios.get("/Manage/Supplier/valid/abbrSupplierName",{params:{id:i.$route.query.id?i.$route.query.id:"",value:r}}).then(function(e){0===e.data.code?t():t(new Error("企业简称重复"))}):t(new Error("请输入企业简称"))},required:!0,trigger:"blur"}],supplierNo:[{validator:function(a,r,t){var i=e;i.Axios.get("/Manage/Supplier/valid/supplierNo",{params:{id:i.$route.query.id?i.$route.query.id:"",value:r}}).then(function(e){0===e.data.code?t():t(new Error("编号重复"))})},required:!0,trigger:"blur"}],productLim:[{required:!0,message:"请输入SKU限制数量",trigger:"blur"}],erpSupplierNo:[{validator:function(a,r,t){var i=e;i.Axios.get("/Manage/Supplier/valid/erpSupplierNo",{params:{id:i.$route.query.id?i.$route.query.id:"",value:r}}).then(function(e){0===e.data.code?t():t(new Error("ERP编号重复"))})},trigger:"blur"}]}}},methods:{handleSubmit:function(e){var a=this;a.$refs[e].validate(function(e){e?a.Axios.post("/Manage/Supplier/save",a.Qs.stringify({id:a.formValidate.id,supplierName:a.formValidate.supplierName,abbrSupplierName:a.formValidate.abbrSupplierName,supplierNo:a.formValidate.supplierNo,productLim:a.formValidate.productLim,erpSupplierNo:a.formValidate.erpSupplierNo,supplierLogo:a.$refs.logoUrl.uploadList[0].filename})).then(function(e){0===e.data.code?(a.status=!1,a.$refs.logoUrl.uploadList=[],a.$Message.success(a.$route.query.id?"修改成功！":"添加成功！")):a.$Message.warning(e.data.message)}):a.$Message.error("有必填项未填写!")})},handleReset:function(e){!this.$route.query.id&&this.$refs[e].resetFields()},getDetail:function(){var e=this;e.Axios.get("/Manage/Supplier/detail",{params:{id:e.$route.query.id}}).then(function(a){e.formValidate={id:a.data.data.id,supplierName:a.data.data.supplierName,abbrSupplierName:a.data.data.abbrSupplierName,supplierNo:a.data.data.supplierNo,erpSupplierNo:a.data.data.erpSupplierNo,productLim:String(a.data.data.productLim)},a.data.data.imgUrl&&e.$refs.classify.defaultList.push({filename:a.data.data.imgUrl}),e.$refs.logoUrl.defaultList.push({filename:a.data.data.supplierLogo})})}},mounted:function(){this.$route.query.id&&this.getDetail()}},i={render:function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{staticClass:"content"},[r("Card",{staticStyle:{border:"none",margin:"16px 0"}},[r("div",{staticClass:"ivu-page-header-title"},[e._v(e._s(e.$route.query.id?"修改":"添加")+"供应商")])]),e._v(" "),r("Card",{style:{margin:"16px 20px",background:"#fff",height:"auto"}},[r("Row",{directives:[{name:"show",rawName:"v-show",value:e.status,expression:"status"}]},[r("Col",{attrs:{md:{span:18,offset:3},lg:{span:10,offset:6}}},[r("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":95}},[r("FormItem",{attrs:{label:"企业名称",prop:"supplierName"}},[r("Input",{attrs:{disabled:e.$route.query.id,maxlength:40,placeholder:"请输入"},model:{value:e.formValidate.supplierName,callback:function(a){e.$set(e.formValidate,"supplierName",a)},expression:"formValidate.supplierName"}})],1),e._v(" "),r("FormItem",{attrs:{label:"简称",prop:"abbrSupplierName"}},[r("Input",{attrs:{disabled:e.$route.query.id,maxlength:10,placeholder:"请输入"},model:{value:e.formValidate.abbrSupplierName,callback:function(a){e.$set(e.formValidate,"abbrSupplierName",a)},expression:"formValidate.abbrSupplierName"}})],1),e._v(" "),r("FormItem",{attrs:{label:"ERP编号",prop:"erpSupplierNo"}},[r("Input",{attrs:{maxlength:40,placeholder:"请输入"},model:{value:e.formValidate.erpSupplierNo,callback:function(a){e.$set(e.formValidate,"erpSupplierNo",a)},expression:"formValidate.erpSupplierNo"}})],1),e._v(" "),r("FormItem",{attrs:{label:"字母编号",prop:"supplierNo"}},[r("Input",{attrs:{disabled:e.$route.query.id,maxlength:5,placeholder:"请输入"},on:{"on-keyup":function(a){e.formValidate.supplierNo=e.formValidate.supplierNo.replace(/[^a-zA-Z]/g,"").toUpperCase()}},model:{value:e.formValidate.supplierNo,callback:function(a){e.$set(e.formValidate,"supplierNo",a)},expression:"formValidate.supplierNo"}})],1),e._v(" "),r("FormItem",{attrs:{label:"logo",prop:"logoUrl"}},[r("upImg",{ref:"logoUrl"})],1),e._v(" "),r("FormItem",{attrs:{label:"SKU数量限制",prop:"productLim"}},[r("Input",{attrs:{disabled:e.$route.query.disabled,maxlength:4,placeholder:"请输入"},on:{"on-keyup":function(a){e.formValidate.productLim=e.formValidate.productLim.replace(/[^\d]/g,"")}},model:{value:e.formValidate.productLim,callback:function(a){e.$set(e.formValidate,"productLim",a)},expression:"formValidate.productLim"}})],1),e._v(" "),r("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.$route.query.disabled,expression:"!$route.query.disabled"}]},[r("Button",{attrs:{type:"primary"},on:{click:function(a){e.handleSubmit("formValidate")}}},[e._v("提交")])],1)],1)],1)],1),e._v(" "),r("Row",{directives:[{name:"show",rawName:"v-show",value:!e.status,expression:"!status"}]},[r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"24"}},[r("Icon",{staticStyle:{margin:"32px 0 24px 0"},attrs:{type:"ios-checkmark-circle",size:"90",color:"#19be6b"}}),e._v(" "),r("div",{staticClass:"ivu-result-title"},[e._v(e._s(e.$route.query.id?"修改成功":"添加成功"))]),e._v(" "),r("Alert",{staticStyle:{width:"50%",margin:"0 auto 32px auto","font-size":"14px","text-align":"left",padding:"16px"}},[e._v("\n          供应商"+e._s(e.$route.query.id?"修改":"添加")+"成功，请到供应商列表查看\n        ")]),e._v(" "),r("Button",{directives:[{name:"show",rawName:"v-show",value:!e.$route.query.id,expression:"!$route.query.id"}],attrs:{type:"primary"},on:{click:function(a){e.handleReset("formValidate"),e.status=!0}}},[e._v("继续添加\n        ")]),e._v(" \n      ")],1)],1)],1)],1)},staticRenderFns:[]};var o=r("VU/8")(t,i,!1,function(e){r("1sJW")},"data-v-ad527f4e",null);a.default=o.exports}});
//# sourceMappingURL=12.2c7b1124b947a8e69f9a.js.map