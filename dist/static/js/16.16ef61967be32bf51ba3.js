webpackJsonp([16],{"2gTj":function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={components:{upImg:t("JNXG").a},data:function(){var a=this;return{current:0,detail:{},formValidate:{id:"",platformName:"",abbrPlatformName:"",logoUrl:"",platformNo:"",domian:"",description:""},ruleValidate:{platformName:[{validator:function(e,t,r){var o=a;t?o.Axios.get("/Manage/Platform/valid/platformName",{params:{id:o.$route.query.id?o.$route.query.id:"",value:t}}).then(function(a){0===a.data.code?r():r(new Error("平台名称重复"))}):r(new Error("请输入平台名称"))},required:!0,trigger:"blur"}],abbrPlatformName:[{validator:function(e,t,r){var o=a;t?o.Axios.get("/Manage/Platform/valid/abbrPlatformName",{params:{id:o.$route.query.id?o.$route.query.id:"",value:t}}).then(function(a){0===a.data.code?r():r(new Error("平台简称重复"))}):r(new Error("请输入平台简称"))},required:!0,trigger:"blur"}],platformNo:[{validator:function(e,t,r){var o=a;t?o.Axios.get("/Manage/Platform/valid/platformNo",{params:{id:o.$route.query.id?o.$route.query.id:"",value:t}}).then(function(a){0===a.data.code?r():r(new Error("平台编号重复"))}):r(new Error("请输入平台编号"))},required:!0,mtrigger:"blur"}],logoUrl:[{validator:function(e,t,r){a.$refs.logo.uploadList<1?r(new Error("请上传logo")):r()},required:!0,trigger:"change"}],domian:[{required:!0,message:"请输入域名",trigger:"blur"}]}}},methods:{handleSubmit:function(a){var e=this;e.$refs[a].validate(function(a){a?e.Axios.post("/Manage/Platform/save",e.Qs.stringify({id:e.formValidate.id,platformName:e.formValidate.platformName,abbrPlatformName:e.formValidate.abbrPlatformName,logoUrl:e.$refs.logo.uploadList[0].filename,domian:e.formValidate.domian,platformNo:e.formValidate.platformNo,description:e.formValidate.description})).then(function(a){0===a.data.code?(e.current=1,e.handleReset("formValidate"),e.$refs.logo.uploadList=[],e.$Message.success(e.$route.query.id?"修改成功！":"添加成功！")):e.$Message.warning(a.data.message)}):e.$Message.error("有必填项未填写!")})},handleReset:function(a){this.$refs[a].resetFields()},getDetail:function(){var a=this;a.Axios.get("/Manage/Platform/detail",{params:{id:a.$route.query.id}}).then(function(e){a.formValidate={id:e.data.data.id,platformName:e.data.data.platformName,abbrPlatformName:e.data.data.abbrPlatformName,domian:e.data.data.domian,platformNo:e.data.data.platformNo,description:e.data.data.description},a.$refs.logo.defaultList.push({filename:e.data.data.logoUrl})})}},mounted:function(){this.$route.query.id&&this.getDetail()}},o={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"content"},[t("Card",{staticStyle:{border:"none",margin:"16px 0"}},[t("div",{staticClass:"ivu-page-header-title"},[a._v(a._s(a.$route.query.id?"编辑":"添加")+"平台")])]),a._v(" "),t("Card",{style:{margin:"16px 20px",background:"#fff",height:"auto"}},[t("Row",{directives:[{name:"show",rawName:"v-show",value:0===a.current,expression:"current===0"}]},[t("Col",{attrs:{md:{span:18,offset:3},lg:{span:10,offset:6}}},[t("Form",{ref:"formValidate",attrs:{model:a.formValidate,rules:a.ruleValidate,"label-width":70}},[t("FormItem",{attrs:{label:"名称",prop:"platformName"}},[t("Input",{attrs:{maxlength:20,placeholder:"请输入"},model:{value:a.formValidate.platformName,callback:function(e){a.$set(a.formValidate,"platformName",e)},expression:"formValidate.platformName"}})],1),a._v(" "),t("FormItem",{attrs:{label:"简称",prop:"abbrPlatformName"}},[t("Input",{attrs:{maxlength:5,placeholder:"请输入"},model:{value:a.formValidate.abbrPlatformName,callback:function(e){a.$set(a.formValidate,"abbrPlatformName",e)},expression:"formValidate.abbrPlatformName"}})],1),a._v(" "),t("FormItem",{attrs:{label:"编号",prop:"platformNo"}},[t("Input",{attrs:{disabled:a.$route.query.id,maxlength:3,placeholder:"请输入"},on:{"on-keyup":function(e){a.formValidate.platformNo=a.formValidate.platformNo.replace(/[^a-zA-Z]/g,"").toUpperCase()}},model:{value:a.formValidate.platformNo,callback:function(e){a.$set(a.formValidate,"platformNo",e)},expression:"formValidate.platformNo"}})],1),a._v(" "),t("FormItem",{attrs:{label:"logo",prop:"logoUrl"}},[t("upImg",{ref:"logo"})],1),a._v(" "),t("FormItem",{attrs:{label:"域名",prop:"domian"}},[t("Input",{attrs:{maxlength:100,placeholder:"请输入"},model:{value:a.formValidate.domian,callback:function(e){a.$set(a.formValidate,"domian",e)},expression:"formValidate.domian"}})],1),a._v(" "),t("FormItem",{attrs:{label:"描述",prop:"description"}},[t("Input",{attrs:{maxlength:80,type:"textarea",placeholder:"请输入"},model:{value:a.formValidate.description,callback:function(e){a.$set(a.formValidate,"description",e)},expression:"formValidate.description"}})],1),a._v(" "),t("FormItem",{attrs:{prop:"description"}},[t("Button",{attrs:{type:"primary"},on:{click:function(e){a.handleSubmit("formValidate")}}},[a._v("提交")])],1)],1)],1)],1),a._v(" "),t("Row",{directives:[{name:"show",rawName:"v-show",value:1===a.current,expression:"current===1"}]},[t("Col",{staticStyle:{"text-align":"center"},attrs:{span:"24"}},[t("Icon",{staticStyle:{margin:"32px 0 24px 0"},attrs:{type:"ios-checkmark-circle",size:"90",color:"#19be6b"}}),a._v(" "),t("div",{staticClass:"ivu-result-title"},[a._v(a._s(a.$route.query.id?"修改":"添加")+"成功")]),a._v(" "),t("Alert",{staticStyle:{width:"50%",margin:"0 auto 32px auto","font-size":"14px","text-align":"left",padding:"16px"}},[a._v("\n          平台"+a._s(a.$route.query.id?"修改":"添加")+"成功，请到平台列表查看\n        ")]),a._v(" "),t("Button",{directives:[{name:"show",rawName:"v-show",value:!a.$route.query.id,expression:"!$route.query.id"}],attrs:{type:"primary"},on:{click:function(e){a.current=0}}},[a._v("继续添加")]),a._v(" \n      ")],1)],1)],1)],1)},staticRenderFns:[]};var i=t("VU/8")(r,o,!1,function(a){t("b5D8")},"data-v-4db9407b",null);e.default=i.exports},b5D8:function(a,e){}});
//# sourceMappingURL=16.16ef61967be32bf51ba3.js.map