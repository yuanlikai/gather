webpackJsonp([11],{"3cLa":function(a,t){},kHC6:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={components:{upImg:e("JNXG").a},watch:{$route:function(){this.current=0,this.handleReset("formValidate"),this.handleReset("formValidate1"),this.handleReset("formValidate2")}},data:function(){var a=this;return{modal:!1,formValidate3:{name:"",approvalStatus:"PASS",rejectReason:""},detail:{},current:0,formValidate:{namePath:""},formValidate1:{skuInfoName:"",subTitle:"",brandName:"",description:"",discount:"",keyWords:"",pics:[]},formValidate2:{marketPrice:"",price:"",skuInfoNo:""},ruleValidate:{classify:[{required:!0,type:"array",min:3,message:"请选择三级分类",trigger:"change"}]},ruleValidate1:{skuInfoName:[{required:!0,message:"请填写名称",trigger:"blur"}],pics1:[{validator:function(t,e,r){a.$refs.pics1.uploadList<1?r(new Error("请上传商品题图")):r()},required:!0,trigger:"change"}],pics2:[{validator:function(t,e,r){a.$refs.pics2.uploadList<1?r(new Error("请上传商品详情图")):r()},required:!0,trigger:"change"}]},ruleValidate2:{marketPrice:[{required:!0,message:"请填写市场价",trigger:"blur"}],price:[{required:!0,message:"请填写售价",trigger:"blur"}],skuInfoNo:[{required:!0,message:"请填写SKU编号",trigger:"blur"}]},treeData:[],brandList:[],tag:[],loading:!0,approvalStatus:""}},methods:{audit:function(){var a=this;a.Axios.post("/Manage/SkuInfo/examine",a.Qs.stringify({id:a.$route.query.examineId,rejectReason:a.formValidate3.rejectReason,approvalStatus:a.formValidate3.approvalStatus})).then(function(t){0===t.data.code?(a.modal=!1,a.getDetail(),a.$Message.success("成功")):a.$Message.warning(t.data.message)})},handleReset:function(a){this.$refs[a].resetFields(),this.tag=[],this.$refs.pics1.handleRemove1(0),this.$refs.pics2.handleRemove1(0)},getDetail:function(){var a=this;a.Axios.get("/Manage/SkuInfo/detail",{params:{id:a.$route.query.examineId}}).then(function(t){for(var e in a.approvalStatus=t.data.data.approvalStatus,a.formValidate={namePath:t.data.data.namePath},a.formValidate1={skuInfoName:t.data.data.skuInfoName,subTitle:t.data.data.subTitle,brandName:t.data.data.brandName,description:t.data.data.description,discount:t.data.data.discount},t.data.data.mianPics)a.$refs.pics1.defaultList.push({filename:t.data.data.mianPics[e].filePath});for(var r in t.data.data.detailPics)a.$refs.pics2.defaultList.push({filename:t.data.data.detailPics[r].filePath});a.formValidate2={marketPrice:String(t.data.data.marketPrice),price:String(t.data.data.price),skuInfoNo:t.data.data.skuInfoNo},t.data.data.keyWords&&(a.tag=t.data.data.keyWords.split(" ")),a.loading=!1})},addTag:function(){this.tag.length<10&&""!==this.formValidate1.keyWords&&(this.tag.push(this.formValidate1.keyWords),this.formValidate1.keyWords="")},handleClose:function(a){this.tag.splice(a,1)},getTree:function(){var a=this;a.Axios.get("/Manage/Category/treeList").then(function(t){a.treeData=t.data.data})},getBrand:function(){var a=this;a.Axios.get("/Manage/Brand/selectBrand").then(function(t){a.brandList=t.data.data})}},mounted:function(){this.getTree(),this.getBrand(),this.getDetail()}},s={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"content"},[e("Card",{staticStyle:{border:"none",margin:"16px 0"}},[e("div",{staticClass:"ivu-page-header-title"},[a._v("商品详情")])]),a._v(" "),e("Card",{style:{margin:"16px 20px",background:"#fff",height:"auto",minHeight:"300px"}},[a.loading?e("Spin",{attrs:{fix:""}}):a._e(),a._v(" "),e("Row",[e("Col",{attrs:{md:{span:18,offset:3},lg:{span:10,offset:6}}},[e("Row",[e("Col",{attrs:{span:"24"}},[e("Form",{ref:"formValidate",attrs:{model:a.formValidate,rules:a.ruleValidate,"label-width":88}},[e("FormItem",{attrs:{label:"商品分类：",prop:"classify"}},[e("span",{staticStyle:{color:"#000"}},[a._v(a._s(a.formValidate.namePath))])])],1)],1)],1),a._v(" "),e("Row",[e("Form",{ref:"formValidate1",attrs:{model:a.formValidate1,rules:a.ruleValidate1,"label-width":88}},[e("Col",{attrs:{span:"24"}},[e("FormItem",{attrs:{label:"商品名称：",prop:"skuInfoName"}},[e("span",{staticStyle:{color:"#000"}},[a._v(a._s(a.formValidate1.skuInfoName))])]),a._v(" "),e("FormItem",{attrs:{label:"副标题：",prop:"subTitle"}},[e("span",{staticStyle:{color:"#000"}},[a._v(a._s(a.formValidate1.subTitle))])]),a._v(" "),e("FormItem",{attrs:{label:"商品品牌：",prop:"brandId"}},[e("span",{staticStyle:{color:"#000"}},[a._v(a._s(a.formValidate1.brandName))])]),a._v(" "),e("FormItem",{attrs:{label:"折扣：",prop:"discount"}},[e("span",{staticStyle:{color:"#000"}},[a._v(a._s(a.formValidate1.discount))])]),a._v(" "),e("FormItem",{attrs:{label:"商品介绍：",prop:"description"}},[e("span",{staticStyle:{color:"#000"}},[a._v(a._s(a.formValidate1.description))])]),a._v(" "),e("FormItem",{attrs:{label:"运费：",prop:"brandStory"}},[e("span",{staticStyle:{color:"#000"}},[a._v("包邮")])]),a._v(" "),e("FormItem",{attrs:{label:"关键词：",prop:"keyWords"}},[e("span",{staticStyle:{color:"#000"}},[a._v(a._s(a.tag.length>0?a.tag:""))])]),a._v(" "),e("FormItem",{attrs:{label:"题图：",prop:"pics1"}},[e("upImg",{ref:"pics1",attrs:{num:6}})],1),a._v(" "),e("FormItem",{attrs:{label:"详情图：",prop:"pics2"}},[e("upImg",{ref:"pics2",attrs:{num:6}})],1)],1)],1)],1),a._v(" "),e("Row",[e("Form",{ref:"formValidate2",attrs:{model:a.formValidate2,rules:a.ruleValidate2,"label-width":88}},[e("Col",{attrs:{span:"24"}},[e("FormItem",{attrs:{label:"市场价：",prop:"marketPrice"}},[e("span",{staticStyle:{color:"#000"}},[a._v(a._s(a.formValidate2.marketPrice))])]),a._v(" "),e("FormItem",{attrs:{label:"售价：",prop:"price"}},[e("span",{staticStyle:{color:"#000"}},[a._v(a._s(a.formValidate2.price))])]),a._v(" "),e("FormItem",{attrs:{label:"SKU编号：",prop:"skuInfoNo"}},[e("span",{staticStyle:{color:"#000"}},[a._v(a._s(a.formValidate2.skuInfoNo))])]),a._v(" "),e("FormItem",{attrs:{label:"状态："}},[e("span",{staticStyle:{color:"#000"}},[a._v(a._s(a.approvalStatus.name))])]),a._v(" "),e("FormItem",[e("Button",{directives:[{name:"show",rawName:"v-show",value:"AUDITING"===a.approvalStatus.value,expression:"approvalStatus.value==='AUDITING'"}],attrs:{type:"primary"},on:{click:function(t){a.modal=!0}}},[a._v("审核")])],1)],1)],1)],1)],1)],1)],1),a._v(" "),e("Modal",{attrs:{width:"360"},model:{value:a.modal,callback:function(t){a.modal=t},expression:"modal"}},[e("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[e("Icon",{attrs:{type:"ios-information-circle"}}),a._v(" "),e("span",[a._v("审核商品")])],1),a._v(" "),e("div",[e("Form",{ref:"formValidate3",attrs:{model:a.formValidate3,"label-width":80}},[e("FormItem",{attrs:{label:"商品名称：",prop:"name"}},[a._v("\n          "+a._s(a.formValidate1.skuInfoName)+"\n        ")]),a._v(" "),e("FormItem",{attrs:{label:"商品审核：",prop:"approvalStatus"}},[e("RadioGroup",{model:{value:a.formValidate3.approvalStatus,callback:function(t){a.$set(a.formValidate3,"approvalStatus",t)},expression:"formValidate3.approvalStatus"}},[e("Radio",{attrs:{label:"PASS"}},[a._v("审核通过")]),a._v(" "),e("Radio",{attrs:{label:"REJECT"}},[a._v("审核不通过")])],1)],1),a._v(" "),"PASS"!==a.formValidate3.approvalStatus?e("FormItem",{attrs:{label:"反馈详情：",prop:"rejectReason"}},[e("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入反馈详情"},model:{value:a.formValidate3.rejectReason,callback:function(t){a.$set(a.formValidate3,"rejectReason",t)},expression:"formValidate3.rejectReason"}})],1):a._e()],1)],1),a._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"primary",size:"large"},on:{click:a.audit}},[a._v("确定")])],1)])],1)},staticRenderFns:[]};var o=e("VU/8")(r,s,!1,function(a){e("3cLa")},"data-v-f03a8668",null);t.default=o.exports}});