webpackJsonp([32],{Zfn0:function(t,e){},gg7a:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){var t=this;return{loading1:!0,formValidate:{skuInfoNameLike:"",skuInfoNoLike:"",classify:[],brandId:""},columns:[{type:"selection",width:60,align:"center"},{title:"商品图片",tooltip:!0,width:120,align:"center",key:"skuInfoPicUrl",render:function(t,e){return t("Poptip",{props:{trigger:"hover",placement:"right"}},[t("img",{style:{cursor:"pointer",height:"30px"},attrs:{src:e.row.skuInfoPicUrl}}),t("div",{attrs:{class:"api"},slot:"content"},[t("img",{style:{height:"200px"},attrs:{src:e.row.skuInfoPicUrl}})])])}},{title:"商品名称",tooltip:!0,key:"skuInfoName",render:function(e,a){return e("div",[e("a",{style:{float:"left",width:"100%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},on:{click:function(){var e=t.$router.resolve({path:"/examine",query:{examineId:a.row.id}});window.open(e.href,"_blank")}}},a.row.skuInfoName),e("div",{style:{color:"#888888"}},"品牌："+(a.row.brandName?a.row.brandName:"未绑定"))])}},{title:"编号",tooltip:!0,key:"skuInfoNo",align:"center"},{title:"商品分类",align:"center",render:function(t,e){return t("p",e.row.category1Name+" > "+e.row.category2Name+" > "+e.row.category3Name)}},{title:"供应商",tooltip:!0,key:"supplierName",align:"center"},{title:"操作",tooltip:!0,key:"ProductName",width:120,align:"center",render:function(e,a){return e("div",[e("Poptip",{props:{confirm:!0,transfer:!0,title:"确定还原商品？"},on:{"on-ok":function(){t.Axios.post("/Manage/SkuInfo/restore",t.Qs.stringify({skuInfoIds:[a.row.id]},{indices:!1})).then(function(e){0===e.data.code?(t.getList(),t.$Message.success("还原商品成功")):t.$Message.warning(e.data.message)})}}},[e("a","还原")]),e("Divider",{props:{type:"vertical"}}),e("Poptip",{props:{confirm:!0,transfer:!0,placement:"top-end",offset:10,title:"删除后将不可恢复，确定删除该商品？"},on:{"on-ok":function(){!0===a.row.onSale?t.$Message.warning("不能删除已上架产品"):t.Axios.post("/Manage/SkuInfo/delete",t.Qs.stringify({id:a.row.id})).then(function(e){0===e.data.code?(t.getList(),t.$Message.success("删除成功！")):t.$Message.warning(e.data.message)})}}},[e("a","删除")])])}}],data:[],total:0,start:1,treeData:[],brandList:[],selection:[]}},methods:{screen:function(t){this.formValidate.classify=t,this.resetPage(),this.getList()},getList:function(){var t=this;t.loading1=!0,t.Axios.get("/Manage/SkuInfo/supplierSkuPageList",{params:{start:t.start-1,size:10,skuInfoNameLike:t.formValidate.skuInfoNameLike,skuInfoNoLike:t.formValidate.skuInfoNoLike,category1:t.formValidate.classify[0],category2:t.formValidate.classify[1],category3:t.formValidate.classify[2],brandId:t.formValidate.brandId,recycleBin:!0}}).then(function(e){0===e.data.code?(t.data=e.data.data.content,t.total=e.data.data.totalElements):t.$Message.warning(e.data.message),t.loading1=!1})},paging:function(t){this.start=t,this.getList()},handleReset:function(t){this.$refs[t].resetFields(),this.resetPage(),this.formValidate.brandId="",this.getList()},getTree:function(){var t=this;t.Axios.get("/Manage/Category/treeList").then(function(e){t.treeData=e.data.data})},getBrand:function(){var t=this;t.Axios.get("/Manage/Brand/selectBrand").then(function(e){t.brandList=e.data.data})},choice:function(t){for(var e in this.selection=[],t)this.selection.push(t[e].id)},batch:function(t){var e=this;e.selection.length>0?e.Axios.post("/Manage/SkuInfo/restore",this.Qs.stringify({skuInfoIds:e.selection},{indices:!1})).then(function(t){0===t.data.code?(e.getList(),e.$Message.success("还原商品成功")):e.$Message.warning(t.data.message)}):e.$Message.warning("至少选择一个商品")},resetPage:function(){this.start=1,this.total=0}},mounted:function(){this.getList(),this.getTree(),this.getBrand()}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("Card",{staticStyle:{border:"none",margin:"16px 0"}},[a("div",{staticClass:"ivu-page-header-title"},[t._v("回收站")])]),t._v(" "),a("Card",{style:{margin:"16px 20px",background:"#fff",height:"auto"}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      筛选查询\n    ")]),t._v(" "),a("Form",{ref:"formValidate",attrs:{model:t.formValidate,"label-width":80}},[a("Row",{attrs:{gutter:30}},[a("Col",{attrs:{xs:24,md:12,lg:8}},[a("FormItem",{attrs:{label:"商品名称：",prop:"skuInfoNameLike"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.skuInfoNameLike,callback:function(e){t.$set(t.formValidate,"skuInfoNameLike",e)},expression:"formValidate.skuInfoNameLike"}})],1)],1),t._v(" "),a("Col",{attrs:{xs:24,md:12,lg:8}},[a("FormItem",{attrs:{label:"商品分类：",prop:"classify"}},[a("Cascader",{attrs:{data:t.treeData},on:{"on-change":t.screen},model:{value:t.formValidate.classify,callback:function(e){t.$set(t.formValidate,"classify",e)},expression:"formValidate.classify"}})],1)],1),t._v(" "),a("Col",{attrs:{xs:24,md:12,lg:8}},[a("FormItem",{attrs:{label:"商品品牌：",prop:"brandNameLike"}},[a("Select",{attrs:{clearable:""},on:{"on-change":function(e){t.getList()}},model:{value:t.formValidate.brandId,callback:function(e){t.$set(t.formValidate,"brandId",e)},expression:"formValidate.brandId"}},t._l(t.brandList,function(e,n){return a("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.brandName))])}))],1)],1),t._v(" "),a("Col",{attrs:{xs:24,md:12,lg:8}},[a("FormItem",{attrs:{label:"编号：",prop:"skuInfoNoLike"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.skuInfoNoLike,callback:function(e){t.$set(t.formValidate,"skuInfoNoLike",e)},expression:"formValidate.skuInfoNoLike"}})],1)],1),t._v(" "),a("Col",{attrs:{xs:24,md:24,lg:8}},[a("FormItem",[a("Button",{staticStyle:{"margin-right":"6px"},attrs:{type:"primary"},on:{click:function(e){t.resetPage(),t.getList()}}},[t._v("查询")]),t._v(" "),a("Button",{staticStyle:{"margin-right":"6px"},on:{click:function(e){t.handleReset("formValidate")}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("Card",{style:{margin:"16px 20px",background:"#fff",height:"auto"}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      数据列表\n    ")]),t._v(" "),a("Table",{attrs:{loading:t.loading1,"show-header":!0,columns:t.columns,data:t.data},on:{"on-selection-change":t.choice}}),t._v(" "),a("div",{staticStyle:{width:"100%",height:"8px",background:"#ffffff","margin-top":"-4px","z-index":"99",position:"relative"}}),t._v(" "),a("div",{staticStyle:{width:"100%","text-align":"right","margin-top":"15px"}},[a("Dropdown",{staticStyle:{float:"left","margin-left":"22px"},attrs:{trigger:"click"},on:{"on-click":function(e){t.batch()}}},[a("Button",[t._v("\n          批量操作\n          "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),t._v(" "),a("DropdownMenu",{staticStyle:{"text-align":"left"},attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"1"},on:{click:function(e){t.getList()}}},[t._v("还原商品")])],1)],1),t._v(" "),a("Page",{attrs:{total:Number(t.total),"page-size":10,"show-elevator":"","show-total":""},on:{"on-change":t.paging}})],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(n,i,!1,function(t){a("Zfn0")},"data-v-144712b1",null);e.default=o.exports}});