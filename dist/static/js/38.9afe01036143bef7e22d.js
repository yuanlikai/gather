webpackJsonp([38],{YcjC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={data:function(){return{supplierList:[],dataSite:[],terraceList:[],selectList:[],modal1:!1,formValidate:{platformid:"",ssq:[],Province:"",City:"",Area:"",UserName:"",Consignee:"",Address:"",Phone:"",Freight:"",Ordernumber:"",Remarks:"",RemarksHt:"",DisMoney:"",Total:"",CustomerName:"",CustomerNo:"",supplierid:"",GetTime:"",Prolist:[]},formValidate1:{KeyWords:""},dataList:[],ruleValidate1:{KeyWords:[{required:!0,message:"请输入关键字",trigger:"blur"}]},columns1:[{type:"selection",width:60,align:"center"},{title:"名称",align:"center",key:"Name"},{title:"货号",align:"center",key:"StockNo"}]}},methods:{getTime:function(t){this.formValidate.GetTime=t},dzjhs:function(t,e){this.formValidate.Province=e[0].label,this.formValidate.City=e[1].label,this.formValidate.Area=e[2].label},handleSubmit:function(t){var e=this,a=this;this.$refs[t].validate(function(t){if(t){var r=e.formValidate.Prolist;console.log("1111111111"),console.log(r),console.log("2222222222");for(var o=e.formValidate,s=0;s<r.length;s++)r[s].CostPrice=String(r[s].CostPrice),r[s].ProductNum=String(r[s].ProductNum),r[s].ProductPrice=String(r[s].ProductPrice),r[s].TotalPrice=String(r[s].TotalPrice);o.Prolist=r,a.Axios.post("/ActCreateOrder.ashx",o).then(function(t){console.log(t.data),0===t.data.error?(a.$Message.success("创建成功"),a.handleReset("formValidate")):a.$Message.error(t.data.errorMsg)})}else e.$Message.error("Fail!")})},delProlist:function(t){this.formValidate.Prolist.splice(t,1)},selectOk:function(){if(this.selectList.length<1)this.$Message.error("请选择商品");else{for(var t=[],e=0;e<this.selectList.length;e++)t.push({ProductId:this.selectList[e].Id,ProductName:this.selectList[e].Name,ProductStockNo:this.selectList[e].StockNo,ProductNum:1,ProductPrice:this.selectList[e].Price,TotalPrice:this.selectList[e].Price,CostPrice:this.selectList[e].CostPrice,ProductPic:this.selectList[e].Pic});this.formValidate.Prolist=t}},selectionChange:function(t){this.selectList=t},selectPro:function(){this.modal1=!0,this.selectList=[],this.dataList=[]},handleSubmit1:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var a=e;a.loading=!0,a.Axios.post("/youke/ManagerSc/GetProListSearch.ashx",a.formValidate1).then(function(t){a.dataList=t.data.datalist,console.log(t.data.datalist)})}})},getTerrace:function(){var t=this;t.Axios.get("/GetPlaList.ashx").then(function(e){t.terraceList=e.data.data})},getSsq:function(){var t=this;t.Axios.get("/Manage/Region/region").then(function(e){t.dataSite=e.data.RegionList})},getSupplier:function(){var t=this;t.Axios.get("/GetSupList.ashx").then(function(e){t.supplierList=e.data.data})},handleReset:function(t){this.$refs[t].resetFields()}},mounted:function(){this.getTerrace(),this.getSupplier(),this.getSsq()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,"label-width":110}},[a("Row",{staticStyle:{width:"1000px",margin:"40px 0 0 40px"},attrs:{gutter:30}},[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"来源平台：",prop:"platformid"}},[a("Select",{attrs:{clearable:""},model:{value:t.formValidate.platformid,callback:function(e){t.$set(t.formValidate,"platformid",e)},expression:"formValidate.platformid"}},t._l(t.terraceList,function(e,r){return a("Option",{key:r,attrs:{value:e.id}},[t._v(t._s(e.platformName)+"\n            ")])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"用户名：",prop:"UserName"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.UserName,callback:function(e){t.$set(t.formValidate,"UserName",e)},expression:"formValidate.UserName"}})],1)],1)],1),t._v(" "),a("Row",{staticStyle:{width:"1000px",margin:"0 0 0 40px"},attrs:{gutter:30}},[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"联系人：",prop:"Consignee"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.Consignee,callback:function(e){t.$set(t.formValidate,"Consignee",e)},expression:"formValidate.Consignee"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"电话：",prop:"Phone"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.Phone,callback:function(e){t.$set(t.formValidate,"Phone",e)},expression:"formValidate.Phone"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"省市区：",prop:"ssq"}},[a("Cascader",{attrs:{data:t.dataSite},on:{"on-change":t.dzjhs},model:{value:t.formValidate.ssq,callback:function(e){t.$set(t.formValidate,"ssq",e)},expression:"formValidate.ssq"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"地址：",prop:"Address"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.Address,callback:function(e){t.$set(t.formValidate,"Address",e)},expression:"formValidate.Address"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"运费：",prop:"Freight"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.Freight,callback:function(e){t.$set(t.formValidate,"Freight",e)},expression:"formValidate.Freight"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"平台订单ID：",prop:"Ordernumber"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.Ordernumber,callback:function(e){t.$set(t.formValidate,"Ordernumber",e)},expression:"formValidate.Ordernumber"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"客户备注：",prop:"Remarks"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.Remarks,callback:function(e){t.$set(t.formValidate,"Remarks",e)},expression:"formValidate.Remarks"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"管理员备注：",prop:"RemarksHt"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.RemarksHt,callback:function(e){t.$set(t.formValidate,"RemarksHt",e)},expression:"formValidate.RemarksHt"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"订单总金额：",prop:"Total"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.Total,callback:function(e){t.$set(t.formValidate,"Total",e)},expression:"formValidate.Total"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"优惠券抵扣金额：",prop:"DisMoney"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.DisMoney,callback:function(e){t.$set(t.formValidate,"DisMoney",e)},expression:"formValidate.DisMoney"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"客户公司名称：",prop:"CustomerName"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.CustomerName,callback:function(e){t.$set(t.formValidate,"CustomerName",e)},expression:"formValidate.CustomerName"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"客户公司编号：",prop:"CustomerNo"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate.CustomerNo,callback:function(e){t.$set(t.formValidate,"CustomerNo",e)},expression:"formValidate.CustomerNo"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"供应商：",prop:"supplierid"}},[a("Select",{attrs:{clearable:"",filterable:""},model:{value:t.formValidate.supplierid,callback:function(e){t.$set(t.formValidate,"supplierid",e)},expression:"formValidate.supplierid"}},t._l(t.supplierList,function(e,r){return a("Option",{key:r,attrs:{value:e.id}},[t._v(t._s(e.supplierName))])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"发货时间：",prop:"GetTime"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{editable:!1,type:"date",format:"yyyy-MM-dd",placeholder:"请选择"},on:{"on-change":t.getTime}})],1)],1),t._v(" "),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品列表：",prop:"Prolist"}},[a("Button",{on:{click:t.selectPro}},[t._v("选择商品")]),t._v(" "),t._l(t.formValidate.Prolist,function(e,r){return t.formValidate.Prolist?a("Row",{key:r},[a("Col",{staticStyle:{"font-size":"13px"},attrs:{span:"5"}},[a("span",{staticStyle:{"font-weight":"700"}},[t._v("名称：")]),t._v(t._s(e.ProductName)+"\n            ")]),t._v(" "),a("Col",{staticStyle:{"font-size":"13px"},attrs:{span:"3"}},[a("span",{staticStyle:{"font-weight":"700"}},[t._v("货号：")]),t._v(t._s(e.ProductStockNo)+"\n            ")]),t._v(" "),a("Col",{staticStyle:{"font-size":"13px"},attrs:{span:"3"}},[a("span",{staticStyle:{"font-weight":"700"}},[t._v("成本：")]),t._v(t._s(e.CostPrice)+"\n            ")]),t._v(" "),a("Col",{staticStyle:{"font-size":"13px"},attrs:{span:"3"}},[a("span",{staticStyle:{"font-weight":"700"}},[t._v("单价：")]),t._v(t._s(e.ProductPrice)+"\n            ")]),t._v(" "),a("Col",{staticStyle:{"font-size":"13px",display:"flex","align-items":"center"},attrs:{span:"4"}},[a("span",{staticStyle:{"font-weight":"700"}},[t._v("数量：")]),t._v(" "),a("InputNumber",{attrs:{max:100,min:1,size:"small"},model:{value:e.ProductNum,callback:function(a){t.$set(e,"ProductNum",a)},expression:"item.ProductNum"}})],1),t._v(" "),a("Col",{staticStyle:{"font-size":"13px"},attrs:{span:"3"}},[a("span",{staticStyle:{"font-weight":"700"}},[t._v("小计：")]),t._v(t._s(e.ProductNum*e.TotalPrice)+"\n            ")]),t._v(" "),a("Col",{attrs:{span:"3"}},[a("a",{on:{click:function(e){t.delProlist(r)}}},[t._v("删除")])])],1):t._e()})],2)],1),t._v(" "),a("Col",{attrs:{span:"24"}},[a("FormItem",[a("div",{staticStyle:{width:"100%"}},[a("Button",{staticStyle:{"margin-right":"6px"},attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("新增")])],1)])],1)],1)],1),t._v(" "),a("Modal",{attrs:{title:"选择商品",width:"700px"},on:{"on-ok":t.selectOk},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("div",[a("Form",{ref:"formValidate1",attrs:{rules:t.ruleValidate1,model:t.formValidate1,"label-width":80}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"关键字：",prop:"KeyWords"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formValidate1.KeyWords,callback:function(e){t.$set(t.formValidate1,"KeyWords",e)},expression:"formValidate1.KeyWords"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",[a("div",{staticStyle:{width:"100%"}},[a("Button",{staticStyle:{"margin-right":"6px"},attrs:{type:"primary"},on:{click:function(e){t.handleSubmit1("formValidate1")}}},[t._v("搜索")])],1)])],1)],1)],1),t._v(" "),a("Table",{staticStyle:{"max-height":"281px","overflow-y":"auto","overflow-x":"hidden"},attrs:{columns:t.columns1,data:t.dataList},on:{"on-selection-change":t.selectionChange}})],1)])],1)},staticRenderFns:[]};var s=a("VU/8")(r,o,!1,function(t){a("faVD")},"data-v-1e35a278",null);e.default=s.exports},faVD:function(t,e){}});